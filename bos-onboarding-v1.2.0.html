<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="version" content="1.2.0">
    <title>BOS Service Onboarding Workflow</title>
    <style>
        /* ===== DESIGN TOKENS ===== */
:root {
    /* Brand Colors */
    --color-brand-primary: #D71E28;
    --color-brand-primary-hover: #B71C24;
    --color-brand-primary-light: rgba(215, 30, 40, 0.1);
    --color-brand-primary-ultralight: rgba(215, 30, 40, 0.05);

    /* Semantic Colors */
    --color-success: #10B981;
    --color-warning: #F59E0B;
    --color-info: #3B82F6;
    --color-info-light: #DBEAFE;

    /* Grayscale */
    --color-gray-50: #F9FAFB;
    --color-gray-100: #F3F4F6;
    --color-gray-200: #E5E7EB;
    --color-gray-300: #D1D5DB;
    --color-gray-400: #9CA3AF;
    --color-gray-500: #6B7280;
    --color-gray-600: #4B5563;
    --color-gray-700: #374151;

    /* Text */
    --color-text-primary: #111827;
    --color-text-secondary: #374151;
    --color-text-tertiary: #6B7280;
    --color-text-inverse: #FFFFFF;

    /* Backgrounds */
    --color-bg-primary: #FFFFFF;
    --color-bg-secondary: #F3F4F6;
    --color-border-default: #D1D5DB;
    --color-border-light: #E5E7EB;

    /* Typography */
    --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-monospace: 'Courier New', 'Consolas', monospace;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 2rem;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.6;

    /* Spacing */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 12px;
    --spacing-lg: 16px;
    --spacing-xl: 24px;
    --spacing-2xl: 32px;

    /* Effects */
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-drawer: -4px 0 20px rgba(0, 0, 0, 0.2);

    /* Transitions */
    --transition-base: 0.2s ease;
    --transition-slow: 0.3s ease;

    /* Layout Dimensions */
    --width-drawer: 500px;
    --width-form-max: 800px;
    --height-header: 64px;
    --height-footer: 48px;
    --height-tab-bar: 60px;

    /* Borders */
    --border-width-default: 1px;
    --border-width-thick: 2px;
    --border-focus: #D71E28;

    /* Z-indexes */
    --z-index-overlay: 1500;
    --z-index-drawer: 1600;

    /* Spacing Helpers */
    --spacing-card-padding: 2rem;
    --spacing-section-gap: 1.5rem;
    --spacing-field-padding: 0.75rem 1rem;

    /* Additional Colors */
    --color-border-focus: #D71E28;
    --color-purple: #9333EA;
}

/* ===== RESET & BASE ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-primary);
    background-color: var(--color-bg-secondary);
    color: var(--color-text-primary);
    line-height: var(--line-height-relaxed);
}

/* ===== STICKY NAVIGATION ===== */
.sticky-nav {
    position: fixed;
    left: 0;
    top: 0;
    width: 260px;
    height: 100vh;
    background: var(--color-gray-50);
    border-right: 1px solid var(--color-gray-200);
    padding: 24px 0;
    overflow-y: auto;
    z-index: 1000;
}

.nav-logo {
    padding: 0 20px 20px;
    margin-bottom: 16px;
    border-bottom: 1px solid var(--color-gray-200);
}

.nav-logo h3 {
    font-size: 1.125rem;
    color: var(--color-brand-primary);
    font-weight: var(--font-weight-bold);
    margin-bottom: 4px;
}

.nav-logo .version {
    display: inline-block;
    background: var(--color-brand-primary);
    color: var(--color-text-inverse);
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    margin-left: 8px;
}

.nav-logo p {
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
    line-height: 1.3;
    margin-top: 8px;
}

.nav-items {
    list-style: none;
}

.nav-item {
    margin-bottom: 2px;
}

.nav-link {
    display: block;
    padding: 10px 20px;
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    text-decoration: none;
    border-left: 4px solid transparent;
    transition: all 0.2s ease;
}

.nav-link:hover {
    background: var(--color-gray-100);
    color: var(--color-text-primary);
}

.nav-link.active {
    background: var(--color-brand-primary-ultralight);
    border-left-color: var(--color-brand-primary);
    color: var(--color-brand-primary);
    font-weight: var(--font-weight-semibold);
}

/* ===== MAIN CONTENT ===== */
.main-content {
    max-width: 1200px;
    margin-left: 280px;
    padding: var(--spacing-2xl);
}

/* ===== HERO SECTION ===== */
.page-hero {
    text-align: center;
    padding: 40px 0 24px;
    border-bottom: 2px solid var(--color-gray-200);
    margin-bottom: var(--spacing-2xl);
}

.page-hero h1 {
    font-size: var(--font-size-3xl);
    color: var(--color-brand-primary);
    font-weight: var(--font-weight-bold);
    letter-spacing: -0.02em;
    margin-bottom: var(--spacing-sm);
}

.page-hero .subtitle {
    font-size: var(--font-size-lg);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
    margin-bottom: var(--spacing-md);
}

.page-hero .meta {
    font-size: var(--font-size-sm);
    color: var(--color-text-tertiary);
}

.page-hero .meta strong {
    color: var(--color-text-secondary);
}

/* ===== CONTENT SECTIONS ===== */
section {
    background: var(--color-bg-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    padding: var(--spacing-2xl);
    margin-bottom: var(--spacing-xl);
}

/* ===== TYPOGRAPHY ===== */
h2 {
    font-size: var(--font-size-2xl);
    color: var(--color-text-primary);
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--color-gray-200);
}

h2:first-child {
    margin-top: 0;
}

h3 {
    font-size: var(--font-size-xl);
    color: var(--color-text-primary);
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-md);
}

h4 {
    font-size: var(--font-size-lg);
    color: var(--color-text-secondary);
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
}

p {
    margin-bottom: var(--spacing-md);
    color: var(--color-text-secondary);
}

ul, ol {
    margin-left: var(--spacing-xl);
    margin-bottom: var(--spacing-md);
}

li {
    margin-bottom: var(--spacing-sm);
    color: var(--color-text-secondary);
}

/* ===== CODE & PRE ===== */
code {
    background: var(--color-gray-100);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    font-family: var(--font-monospace);
    font-size: 0.9em;
    color: var(--color-text-primary);
}

pre {
    background: var(--color-gray-100);
    padding: var(--spacing-lg);
    border-radius: var(--radius-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    border-left: 4px solid var(--color-brand-primary);
}

pre code {
    background: none;
    padding: 0;
}

/* ===== TABLES ===== */
table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--spacing-lg) 0;
    font-size: var(--font-size-sm);
    background: var(--color-bg-primary);
    border-radius: var(--radius-md);
    overflow: hidden;
}

th {
    background: var(--color-gray-100);
    color: var(--color-text-primary);
    padding: var(--spacing-md);
    text-align: left;
    font-weight: var(--font-weight-semibold);
    border-bottom: 2px solid var(--color-gray-200);
}

td {
    padding: var(--spacing-md);
    border-bottom: 1px solid var(--color-gray-200);
    color: var(--color-text-secondary);
}

tbody tr:hover {
    background: var(--color-gray-50);
}

/* ===== CALLOUT BOXES ===== */
.callout {
    padding: var(--spacing-lg);
    margin: var(--spacing-lg) 0;
    border-radius: var(--radius-md);
    border-left: 4px solid;
}

.callout-info {
    background: var(--color-info-light);
    border-color: var(--color-info);
}

.callout-warning {
    background: #FEF3C7;
    border-color: var(--color-warning);
}

.callout-important {
    background: var(--color-brand-primary-light);
    border-color: var(--color-brand-primary);
}

.callout strong {
    color: var(--color-text-primary);
    display: block;
    margin-bottom: var(--spacing-sm);
}

.callout p {
    margin-bottom: var(--spacing-sm);
}

.callout p:last-child {
    margin-bottom: 0;
}

.callout ul {
    margin-top: var(--spacing-sm);
    margin-bottom: 0;
}

/* ===== BADGES ===== */
.status-badge {
    padding: 4px 10px;
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    font-weight: var(--font-weight-semibold);
    display: inline-block;
}

.status-verified {
    background: #D1FAE5;
    color: #065F46;
}

.status-gap {
    background: #FEF3C7;
    color: #92400E;
}

/* ===== UTILITIES ===== */
strong {
    color: var(--color-text-primary);
    font-weight: var(--font-weight-semibold);
}

hr {
    border: none;
    border-top: 1px solid var(--color-gray-200);
    margin: var(--spacing-2xl) 0;
}

/* ===== MERMAID DIAGRAMS ===== */
.diagram-container {
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--radius-md);
    padding: var(--spacing-xl);
    margin: var(--spacing-xl) 0;
    overflow-x: auto;
    box-shadow: var(--shadow-sm);
}

.diagram-container h4 {
    margin-top: 0;
    margin-bottom: var(--spacing-lg);
    color: var(--color-text-primary);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--color-gray-200);
}

.diagram-container .mermaid {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
}

.diagram-caption {
    margin-top: var(--spacing-md);
    font-size: var(--font-size-sm);
    color: var(--color-text-tertiary);
    font-style: italic;
    text-align: center;
}

.diagram-container .mermaid {
    cursor: pointer;
}

.diagram-expand-hint {
    text-align: center;
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
    margin-top: var(--spacing-sm);
    font-style: italic;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .sticky-nav {
        position: relative;
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid var(--color-gray-200);
    }

    .main-content {
        margin-left: 0;
        padding: var(--spacing-lg);
    }
}

        .page-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ===== HEADER ===== */
        .page-header {
            background-color: var(--color-brand-primary);
            color: var(--color-text-inverse);
            padding: var(--spacing-md) var(--spacing-xl);
            box-shadow: var(--shadow-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: var(--height-header);
            flex-shrink: 0;
        }

        .page-header h1 {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
        }

        .help-icon {
            font-size: var(--font-size-xl);
            cursor: pointer;
            opacity: 0.9;
            transition: opacity var(--transition-base);
            background: none;
            border: none;
            color: var(--color-text-inverse);
            padding: var(--spacing-sm);
        }

        .help-icon:hover {
            opacity: 1;
        }

        .back-to-gallery {
            background: none;
            border: none;
            color: var(--color-text-inverse);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            opacity: 0.9;
            transition: opacity var(--transition-base);
            display: none;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-sm) var(--spacing-md);
        }

        .back-to-gallery:hover {
            opacity: 1;
        }

        .back-to-gallery.visible {
            display: flex;
        }

        /* ===== CONTAINER ===== */
        .container {
            flex: 1;
            max-width: 1100px;
            margin: 0 auto;
            padding: 3rem 2rem;
            width: 100%;
        }

        /* ===== INTRO SECTION ===== */
        .intro-section {
            text-align: center;
            margin-bottom: 3rem;
        }

        .intro-section h2 {
            font-size: 2rem;
            color: var(--color-text-primary);
            margin-bottom: 1rem;
        }

        .intro-section p {
            font-size: 1.125rem;
            color: var(--color-text-secondary);
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        /* ===== EXAMPLE GRID ===== */
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .example-card {
            background: var(--color-bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: 1.5rem;
            transition: transform var(--transition-base), box-shadow var(--transition-base);
            border-left: 4px solid var(--color-brand-primary);
        }

        .example-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .example-header {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .example-icon {
            font-size: 2.5rem;
            flex-shrink: 0;
        }

        .example-title-section {
            flex: 1;
        }

        .complexity-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            margin-bottom: 0.5rem;
        }

        .complexity-badge.standard {
            background: #D1FAE5;
            color: #065F46;
        }

        .complexity-badge.complex {
            background: #FEF3C7;
            color: #92400E;
        }

        .example-card h3 {
            font-size: var(--font-size-lg);
            color: var(--color-text-primary);
            margin-bottom: 0.5rem;
        }

        .example-card p {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
            margin-bottom: 1.5rem;
            min-height: 60px;
        }

        .example-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-md);
            font-weight: var(--font-weight-semibold);
            font-size: var(--font-size-sm);
            cursor: pointer;
            transition: all var(--transition-base);
            border: none;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }

        .btn-primary {
            background: var(--color-brand-primary);
            color: var(--color-text-inverse);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--color-brand-primary-hover);
        }

        .btn-secondary {
            background: var(--color-bg-primary);
            color: var(--color-text-secondary);
            border: var(--border-width-default) solid var(--color-border-default);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--color-gray-50);
            border-color: var(--color-gray-400);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ===== START SECTION ===== */
        .start-section {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .start-section h3 {
            font-size: var(--font-size-lg);
            margin-bottom: 1rem;
            color: var(--color-text-primary);
        }

        .start-section p {
            color: var(--color-text-secondary);
            margin-bottom: 1.5rem;
        }

        .btn-large {
            padding: 0.875rem 2rem;
            font-size: 1rem;
        }

        /* ===== FORM VIEW (Hidden initially) ===== */
        .form-view {
            display: none;
            flex-direction: column;
            min-height: calc(100vh - var(--height-header) - var(--height-footer));
        }

        .form-view.active {
            display: flex;
        }

        /* ===== TAB BAR ===== */
        .tab-bar {
            background: var(--color-bg-primary);
            border-bottom: var(--border-width-thick) solid var(--color-gray-200);
            display: flex;
            height: var(--height-tab-bar);
            align-items: stretch;
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
        }

        .tab {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            background: var(--color-gray-50);
            border: none;
            border-right: var(--border-width-default) solid var(--color-gray-200);
            cursor: pointer;
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-tertiary);
            transition: all var(--transition-base);
            position: relative;
            padding: var(--spacing-sm);
        }

        .tab:last-child {
            border-right: none;
        }

        .tab:hover:not(.active) {
            background: var(--color-gray-100);
            color: var(--color-text-secondary);
        }

        .tab.active {
            background: var(--color-bg-primary);
            color: var(--color-brand-primary);
            border-bottom: 3px solid var(--color-brand-primary);
        }

        .tab.completed {
            color: var(--color-success);
        }

        .tab-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xs);
            border: 2px solid currentColor;
            flex-shrink: 0;
        }

        .tab.active .tab-status {
            border-color: var(--color-brand-primary);
            background: var(--color-brand-primary-light);
        }

        .tab.completed .tab-status {
            border-color: var(--color-success);
            background: var(--color-success);
            color: white;
        }

        /* ===== FORM CONTAINER ===== */
        .form-container {
            flex: 1;
            overflow-y: auto;
            display: flex;
            justify-content: center;
            padding: var(--spacing-lg);
        }

        .form-card {
            background: var(--color-bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: var(--spacing-card-padding);
            width: 100%;
            max-width: var(--width-form-max);
            height: fit-content;
        }

        /* ===== TAB CONTENT ===== */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ===== FORM ELEMENTS ===== */
        .form-group {
            margin-bottom: var(--spacing-section-gap);
        }

        .form-label {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
            font-size: var(--font-size-sm);
        }

        .form-label.critical {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-bold);
            color: var(--color-text-primary);
        }

        .required {
            color: var(--color-brand-primary);
        }

        .form-input, .form-select {
            width: 100%;
            padding: var(--spacing-field-padding);
            border: var(--border-width-default) solid var(--color-border-default);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-family: var(--font-primary);
            transition: all var(--transition-base);
            background: var(--color-bg-primary);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--color-border-focus);
            box-shadow: 0 0 0 3px var(--color-brand-primary-light);
        }

        .form-input.critical:focus {
            border-color: var(--color-brand-primary);
            box-shadow: 0 0 0 4px var(--color-brand-primary-light);
        }

        textarea.form-input {
            resize: vertical;
            font-family: var(--font-primary);
        }

        textarea.form-input.short {
            min-height: 80px;
        }

        textarea.form-input.medium {
            min-height: 100px;
        }

        textarea.form-input.tall {
            min-height: 160px;
        }

        textarea.technical {
            font-family: var(--font-monospace);
            font-size: var(--font-size-xs);
            background: var(--color-gray-50);
        }

        .field-hint {
            font-size: var(--font-size-xs);
            color: var(--color-text-tertiary);
            margin-top: var(--spacing-xs);
            line-height: var(--line-height-normal);
        }

        .template-indicator {
            display: inline-block;
            font-size: var(--font-size-xs);
            color: var(--color-info);
            font-weight: var(--font-weight-medium);
            margin-left: var(--spacing-sm);
        }

        /* ===== IMPACT SECTIONS (Tab 4) ===== */
        .impact-section {
            margin-bottom: var(--spacing-xl);
            border: 1px solid var(--color-border-default);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .impact-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg);
            background-color: var(--color-gray-50);
            cursor: pointer;
            transition: background-color var(--transition-base);
        }

        .impact-section-header:hover {
            background-color: var(--color-gray-100);
        }

        .impact-section-header h4 {
            margin: 0;
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
        }

        .expand-icon {
            font-size: var(--font-size-sm);
            color: var(--color-text-tertiary);
            transition: transform var(--transition-base);
        }

        .expand-icon.expanded {
            transform: rotate(-180deg);
        }

        .impact-section-content {
            padding: var(--spacing-xl);
            border-top: 1px solid var(--color-border-light);
        }

        .tab-description {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-xl);
            line-height: var(--line-height-relaxed);
        }

        /* ===== NAVIGATION BUTTONS ===== */
        .form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--spacing-md);
            padding-top: var(--spacing-lg);
            border-top: var(--border-width-default) solid var(--color-border-light);
            margin-top: var(--spacing-xl);
        }

        .progress-indicator {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-xs);
            color: var(--color-text-tertiary);
        }

        .progress-bar {
            width: 120px;
            height: 6px;
            background: var(--color-gray-200);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--color-brand-primary);
            transition: width var(--transition-slow);
        }

        /* ===== QUALITY CHECKLIST (Preview Tab) ===== */
        .checklist-section {
            background: var(--color-gray-50);
            border: var(--border-width-default) solid var(--color-border-light);
            border-radius: var(--radius-md);
            margin-top: var(--spacing-xl);
        }

        .checklist-header {
            padding: var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .checklist-header h4 {
            font-size: var(--font-size-base);
            color: var(--color-text-primary);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .checklist-toggle {
            font-size: var(--font-size-xs);
            color: var(--color-text-tertiary);
            transition: transform var(--transition-base);
        }

        .checklist-header.expanded .checklist-toggle {
            transform: rotate(180deg);
        }

        .checklist-content {
            display: none;
            padding: 0 var(--spacing-lg) var(--spacing-lg);
        }

        .checklist-content.visible {
            display: block;
        }

        .checklist-category {
            margin-bottom: var(--spacing-lg);
        }

        .checklist-category:last-child {
            margin-bottom: 0;
        }

        .checklist-category h5 {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            font-size: var(--font-size-sm);
        }

        .checklist-item .icon {
            flex-shrink: 0;
            font-size: var(--font-size-base);
        }

        /* ===== PREVIEW TAB STYLES ===== */
        .preview-container {
            background: var(--color-gray-50);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
        }

        .preview-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-lg);
            border-bottom: 2px solid var(--color-gray-200);
        }

        .preview-header h3 {
            font-size: var(--font-size-xl);
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .preview-header p {
            color: var(--color-text-tertiary);
            font-size: var(--font-size-sm);
        }

        .preview-card {
            background: var(--color-bg-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-md);
        }

        .preview-section-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            color: var(--color-brand-primary);
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-sm);
            border-bottom: 2px solid var(--color-brand-primary);
        }

        .preview-field {
            margin-bottom: var(--spacing-lg);
        }

        .preview-field:last-child {
            margin-bottom: 0;
        }

        .preview-field-label {
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--spacing-xs);
        }

        .preview-field-value {
            font-size: var(--font-size-base);
            color: var(--color-text-primary);
            line-height: var(--line-height-relaxed);
            white-space: pre-wrap;
        }

        .preview-field-value.code {
            background: var(--color-gray-100);
            border: var(--border-width-default) solid var(--color-border-light);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            font-family: var(--font-monospace);
            font-size: var(--font-size-sm);
            overflow-x: auto;
        }

        .preview-field-value.empty {
            color: var(--color-text-tertiary);
            font-style: italic;
        }

        /* User Stories Section */
        .user-stories-section {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg);
            background: var(--color-gray-50);
            border-radius: var(--radius-md);
        }

        .user-stories-section h4 {
            font-size: var(--font-size-lg);
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .user-stories-section > p {
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-lg);
            font-size: var(--font-size-sm);
        }

        .story-card {
            background: var(--color-bg-primary);
            border: var(--border-width-default) solid var(--color-border-default);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .story-card:last-child {
            margin-bottom: 0;
        }

        .story-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .story-id {
            font-family: var(--font-monospace);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            color: var(--color-gray-600);
            background: var(--color-gray-100);
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
        }

        .story-persona {
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .story-persona.developer {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .story-persona.sre {
            background: #FEF3C7;
            color: #92400E;
        }

        .story-persona.po {
            background: #DCFCE7;
            color: #166534;
        }

        .story-card h5 {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-md);
        }

        .story-details {
            margin-bottom: var(--spacing-md);
        }

        .story-details p {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
        }

        .story-details strong {
            color: var(--color-text-primary);
            font-weight: var(--font-weight-semibold);
        }

        .story-dynamic {
            color: var(--color-brand-primary);
            font-weight: var(--font-weight-medium);
            font-style: italic;
        }

        .acceptance-criteria {
            background: var(--color-gray-50);
            padding: var(--spacing-md);
            border-radius: var(--radius-sm);
            margin-top: var(--spacing-md);
        }

        .acceptance-criteria strong {
            display: block;
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .acceptance-criteria ul {
            margin-left: var(--spacing-xl);
            margin-top: var(--spacing-sm);
        }

        .acceptance-criteria li {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-xs);
            line-height: var(--line-height-relaxed);
        }

        .preview-next-steps {
            background: var(--color-info-light);
            border-left: 4px solid var(--color-info);
            border-radius: var(--radius-sm);
            padding: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .preview-next-steps h4 {
            font-size: var(--font-size-base);
            color: var(--color-info);
            margin-bottom: var(--spacing-md);
        }

        .preview-next-steps ul {
            margin-left: var(--spacing-xl);
        }

        .preview-next-steps li {
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
            font-size: var(--font-size-sm);
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing-md);
        }

        .badge-complete {
            background: #D1FAE5;
            color: #065F46;
        }

        .badge-incomplete {
            background: #FEF3C7;
            color: #92400E;
        }

        /* ===== MODALS ===== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: var(--z-index-overlay);
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal-overlay.visible {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: var(--radius-lg);
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        }

        .modal-header {
            background: var(--color-brand-primary);
            color: white;
            padding: var(--spacing-xl);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .modal-header h3 {
            font-size: var(--font-size-lg);
        }

        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.9;
        }

        .modal-close:hover {
            opacity: 1;
        }

        .modal-content {
            padding: var(--spacing-xl);
        }

        .field-display {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--color-gray-200);
        }

        .field-display:last-child {
            border-bottom: none;
        }

        .field-label {
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-sm);
            display: block;
        }

        .field-value {
            color: var(--color-text-primary);
            font-size: var(--font-size-base);
            white-space: pre-wrap;
        }

        .field-value.code {
            background: var(--color-gray-50);
            padding: var(--spacing-lg);
            border-radius: var(--radius-sm);
            font-family: var(--font-monospace);
            font-size: var(--font-size-sm);
            overflow-x: auto;
        }

        /* ===== FOOTER ===== */
        .footer {
            flex-shrink: 0;
            padding: var(--spacing-md) var(--spacing-xl);
            text-align: center;
            font-size: var(--font-size-xs);
            color: var(--color-text-tertiary);
            border-top: var(--border-width-default) solid var(--color-border-light);
            background: var(--color-bg-primary);
            height: var(--height-footer);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ===== HELP DRAWER ===== */
        .guide-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: var(--z-index-overlay);
        }

        .guide-overlay.visible {
            display: block;
        }

        .help-drawer {
            position: fixed;
            top: 0;
            right: -500px;
            width: var(--width-drawer);
            height: 100%;
            background: var(--color-bg-primary);
            box-shadow: var(--shadow-drawer);
            z-index: var(--z-index-drawer);
            transition: right var(--transition-slow);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .help-drawer.visible {
            right: 0;
        }

        .drawer-header {
            background: var(--color-brand-primary);
            color: var(--color-text-inverse);
            padding: var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .drawer-header h2 {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
        }

        .close-btn {
            font-size: var(--font-size-2xl);
            cursor: pointer;
            background: none;
            border: none;
            color: var(--color-text-inverse);
            line-height: 1;
            opacity: 0.9;
            padding: 0;
        }

        .close-btn:hover {
            opacity: 1;
        }

        .drawer-content {
            padding: var(--spacing-lg);
            flex: 1;
            overflow-y: auto;
        }

        .drawer-content h3 {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        .drawer-content h3:first-child {
            margin-top: 0;
        }

        .drawer-content p {
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-md);
            font-size: var(--font-size-sm);
        }

        .drawer-content ul {
            margin-left: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
        }

        .drawer-content li {
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
            font-size: var(--font-size-sm);
        }

        .example-box {
            background: var(--color-gray-50);
            border-left: 4px solid var(--color-brand-primary);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            font-size: var(--font-size-sm);
        }

        .example-box strong {
            display: block;
            color: var(--color-brand-primary);
            margin-bottom: var(--spacing-sm);
        }

        .pattern-hint {
            background: var(--color-info-light);
            border-left: 3px solid var(--color-info);
            padding: var(--spacing-md);
            margin: var(--spacing-sm) 0;
            font-size: var(--font-size-xs);
            border-radius: var(--radius-sm);
        }

        .pattern-hint strong {
            color: var(--color-info);
            display: block;
            margin-bottom: var(--spacing-xs);
        }

        /* ===== GLOSSARY DRAWER ===== */
        .glossary-drawer {
            position: fixed;
            top: 0;
            right: -500px;
            width: var(--width-drawer);
            height: 100%;
            background: var(--color-bg-primary);
            box-shadow: var(--shadow-drawer);
            z-index: var(--z-index-drawer);
            transition: right var(--transition-slow);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .glossary-drawer.visible {
            right: 0;
        }

        .glossary-search {
            padding: var(--spacing-md);
            background: var(--color-gray-50);
            border-bottom: var(--border-width-default) solid var(--color-border-light);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .glossary-search-input {
            width: 100%;
            padding: var(--spacing-md);
            font-size: var(--font-size-sm);
            border: var(--border-width-default) solid var(--color-border-default);
            border-radius: var(--radius-md);
            font-family: var(--font-primary);
            transition: border-color var(--transition-base);
        }

        .glossary-search-input:focus {
            outline: none;
            border-color: var(--color-border-focus);
        }

        .glossary-section {
            padding: var(--spacing-lg) var(--spacing-lg) var(--spacing-md);
            border-bottom: var(--border-width-default) solid var(--color-border-light);
        }

        .glossary-section:last-child {
            border-bottom: none;
        }

        .glossary-section h3 {
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-bold);
            color: var(--color-brand-primary);
            margin-bottom: var(--spacing-lg);
        }

        .glossary-term {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-lg);
            border-bottom: var(--border-width-default) solid var(--color-gray-200);
        }

        .glossary-term:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .term-name {
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .term-dual {
            font-size: var(--font-size-xs);
            color: var(--color-info);
            font-style: italic;
            margin-bottom: var(--spacing-sm);
            font-weight: var(--font-weight-medium);
        }

        .term-definition {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            line-height: var(--line-height-relaxed);
        }

        /* ===== LANDING SCREEN ===== */
        .landing-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-bg-primary);
            z-index: 2000;
            overflow-y: auto;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .landing-screen.visible {
            opacity: 1;
            pointer-events: all;
        }

        /* ===== STICKY SIDEBAR NAVIGATION ===== */
        .sidebar-nav {
            position: fixed;
            left: 0;
            top: 0;
            width: 220px;
            height: 100vh;
            background: var(--color-gray-50);
            border-right: 1px solid var(--color-gray-200);
            padding: 24px 0;
            overflow-y: auto;
            z-index: 2001;
        }

        .nav-logo {
            padding: 0 20px 20px;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--color-gray-200);
        }

        .nav-logo h3 {
            font-size: 1rem;
            color: var(--color-brand-primary);
            font-weight: var(--font-weight-bold);
            margin-bottom: 4px;
        }

        .nav-logo p {
            font-size: 0.6875rem;
            color: var(--color-text-tertiary);
            line-height: 1.3;
        }

        .nav-items {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 2px;
        }

        .nav-link {
            display: block;
            padding: 12px 20px;
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            text-decoration: none;
            border-left: 4px solid transparent;
            transition: all 0.2s ease;
        }

        .nav-link:hover {
            background: var(--color-gray-100);
            color: var(--color-text-primary);
        }

        .nav-link.active {
            background: rgba(215, 30, 40, 0.05);
            border-left-color: var(--color-brand-primary);
            color: var(--color-brand-primary);
            font-weight: var(--font-weight-semibold);
        }

        .landing-content {
            max-width: 1200px;
            margin: 0 auto 0 240px; /* Left margin for sidebar */
            padding: var(--spacing-2xl);
        }

        .landing-hero {
            text-align: center;
            padding: 40px 0 24px;
            border-bottom: 2px solid var(--color-border-light);
            margin-bottom: var(--spacing-2xl);
        }

        .landing-hero h1 {
            font-size: 2.5rem;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-lg);
            font-weight: var(--font-weight-bold);
            line-height: 1.2;
        }

        .landing-hero .subtitle {
            font-size: var(--font-size-lg);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-2xl);
        }

        .executive-questions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-lg);
            max-width: 800px;
            margin: 0 auto var(--spacing-2xl);
        }

        .exec-question {
            background: #FEF2F2;
            border-left: 4px solid var(--color-brand-primary);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            font-size: var(--font-size-base);
            color: var(--color-text-primary);
            font-weight: var(--font-weight-medium);
        }

        .landing-section {
            margin-bottom: var(--spacing-2xl);
            padding: var(--spacing-2xl) 0;
        }

        .landing-section h2 {
            font-size: 1.75rem;
            color: var(--color-brand-primary);
            margin-bottom: var(--spacing-lg);
            text-align: center;
        }

        .landing-section h3 {
            font-size: 1.25rem;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-md);
        }

        .landing-section p {
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            line-height: var(--line-height-relaxed);
            margin-bottom: var(--spacing-md);
        }

        /* Two-Column Comparison Grid - V4 COMPACT */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            background: white;
            border-radius: var(--radius-lg);
            padding: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .comparison-column {
            background: var(--color-bg-secondary);
            border: 2px solid var(--color-border-default);
            border-radius: var(--radius-lg);
            padding: 10px;
        }

        .comparison-column h3 {
            font-size: 1.125rem;
            margin-bottom: 6px;
            color: var(--color-text-primary);
        }

        .subtitle {
            font-size: 0.8125rem;
            color: var(--color-text-tertiary);
            margin-bottom: 14px;
        }

        .signal-list {
            font-family: var(--font-monospace);
            font-size: 0.8125rem;
            color: var(--color-text-primary);
            line-height: 1.4;
            white-space: pre-wrap;
        }

        .signal-warning {
            color: #D97706;
        }

        .signal-ok {
            color: var(--color-success);
        }

        .highlight-text {
            background: #FEF3C7;
            padding: 1px 3px;
            border-radius: 2px;
            font-weight: 600;
        }

        .tells-us {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--color-gray-200);
            font-size: 0.8125rem;
        }

        .tells-us strong {
            color: var(--color-text-primary);
        }

        .bos-adds-green {
            color: var(--color-success);
            font-weight: 600;
        }

        .bos-adds-blue {
            color: var(--color-info);
            font-weight: 600;
        }

        /* Signal type definitions */
        .signal-type-note {
            font-size: 0.75rem;
            color: var(--color-text-tertiary);
            font-style: italic;
            margin-top: 4px;
        }

        /* De-emphasized traditional signals */
        .deemphasized {
            opacity: 0.4;
            font-size: 0.75rem;
        }

        /* Stakeholder context box */
        .stakeholder-context {
            background: #F0FDF4;
            border-left: 3px solid var(--color-success);
            padding: 6px 8px;
            margin-bottom: 8px;
            font-size: 0.8125rem;
            border-radius: 3px;
        }

        .stakeholder-context strong {
            color: var(--color-success);
        }

        /* BOS Layers - COMPACT */
        .bos-layer {
            margin-top: 8px;
            padding: 6px;
            border-radius: var(--radius-md);
            border: 2px solid;
        }

        .bos-layer.business-health {
            background: #ECFDF5;
            border-color: var(--color-success);
        }

        .bos-layer.business-impact {
            background: #EFF6FF;
            border-color: var(--color-info);
        }

        .layer-label {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: var(--color-success);
            color: white;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.6875rem;
            font-weight: 700;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .layer-label.impact {
            background: var(--color-info);
        }

        /* Dimension labels */
        .dimension {
            color: var(--color-text-tertiary);
            font-size: 0.75rem;
            font-style: italic;
        }

        /* Bridge Box */
        .bridge-box {
            margin-top: 16px;
            padding: 10px;
            background: linear-gradient(90deg, var(--color-gray-100) 0%, rgba(16, 185, 129, 0.1) 100%);
            border: 2px dashed var(--color-success);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .bridge-box-content {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .bridge-arrow {
            font-size: 1.5rem;
            color: var(--color-success);
            font-weight: bold;
        }

        /* Summary Bar */
        .summary-bar {
            margin-top: 16px;
            padding: 8px;
            background: linear-gradient(135deg, #FAF5FF 0%, #EFF6FF 100%);
            border: 2px solid var(--color-purple);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .summary-bar strong {
            font-size: 1.125rem;
            color: var(--color-purple);
        }

        .summary-bar .detail {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            margin-top: 4px;
        }

        .semantic-flow {
            background: var(--color-gray-50);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            margin: var(--spacing-xl) 0;
        }

        .flow-diagram {
            font-size: var(--font-size-base);
            line-height: 2;
            text-align: center;
            color: var(--color-text-primary);
        }

        .flow-diagram .flow-item {
            font-weight: var(--font-weight-semibold);
            color: var(--color-brand-primary);
        }

        .flow-example {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-lg);
            background: var(--color-bg-primary);
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            line-height: 1.8;
        }

        .role-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-lg);
            margin-top: var(--spacing-xl);
        }

        .role-card {
            background: var(--color-bg-primary);
            border: 2px solid var(--color-border-default);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            text-align: center;
        }

        .role-card .role-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            background: var(--color-brand-primary);
            color: white;
            border-radius: 50%;
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            margin-bottom: var(--spacing-md);
        }

        .role-card h4 {
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-md);
            font-size: var(--font-size-lg);
        }

        .role-card ul {
            text-align: left;
            list-style: none;
            padding: 0;
        }

        .role-card li {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
            padding-left: var(--spacing-lg);
            position: relative;
        }

        .role-card li:before {
            content: "";
            position: absolute;
            left: 0;
            color: var(--color-brand-primary);
            font-weight: bold;
        }

        .bridge-message {
            background: var(--color-info-light);
            border: 2px solid var(--color-info);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            margin: var(--spacing-2xl) 0;
        }

        .bridge-message h3 {
            color: var(--color-info);
            margin-bottom: var(--spacing-md);
        }

        .bridge-formula {
            background: var(--color-bg-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            font-family: var(--font-monospace);
            font-size: var(--font-size-sm);
            line-height: 1.8;
            margin: var(--spacing-lg) 0;
        }

        .bridge-points {
            list-style: none;
            padding: 0;
        }

        .bridge-points li {
            padding-left: var(--spacing-xl);
            margin-bottom: var(--spacing-sm);
            position: relative;
        }

        .bridge-points li:before {
            content: "";
            position: absolute;
            left: 0;
            color: var(--color-success);
            font-weight: bold;
        }

        .landing-cta {
            text-align: center;
            padding: 60px 0;
        }

        .landing-cta h2 {
            margin-bottom: var(--spacing-xl);
        }

        .landing-cta .btn-large {
            font-size: var(--font-size-lg);
            padding: var(--spacing-lg) var(--spacing-2xl);
            border-radius: var(--radius-md);
            font-weight: var(--font-weight-semibold);
        }

        /* BOS Title/Branding */
        .bos-title {
            font-size: 3rem;
            color: var(--color-brand-primary);
            font-weight: var(--font-weight-bold);
            letter-spacing: -0.02em;
            margin-bottom: var(--spacing-sm);
        }

        .bos-subtitle {
            font-size: 1.25rem;
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
            margin-bottom: 0;
        }

        .value-proposition {
            font-size: var(--font-size-lg);
            color: var(--color-text-secondary);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* Traditional Observability Gap */
        .observability-gap {
            background: #FEF2F2;
            border-left: 4px solid var(--color-warning);
            padding: var(--spacing-xl);
            max-width: 900px;
            margin: 0 auto var(--spacing-2xl);
            border-radius: var(--radius-md);
        }

        .observability-gap h4 {
            color: var(--color-warning);
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-md);
        }

        .observability-gap p {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            line-height: var(--line-height-relaxed);
            margin-bottom: var(--spacing-md);
        }

        .observability-gap .scenario {
            background: white;
            padding: var(--spacing-md);
            border-radius: var(--radius-sm);
            margin: var(--spacing-md) 0;
            font-family: var(--font-monospace);
            font-size: var(--font-size-sm);
            line-height: 1.8;
        }

        .observability-gap .scenario strong {
            color: var(--color-text-primary);
        }

        .observability-gap p:last-child {
            margin-bottom: 0;
            font-weight: var(--font-weight-semibold);
        }

        /* Business Principle Callout */
        .business-principle {
            background: var(--color-gray-50);
            border-left: 4px solid var(--color-brand-primary);
            padding: var(--spacing-xl);
            max-width: 900px;
            margin: 0 auto var(--spacing-2xl);
            border-radius: var(--radius-md);
        }

        .business-principle h4 {
            color: var(--color-brand-primary);
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-md);
        }

        .business-principle p {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            line-height: var(--line-height-relaxed);
            margin-bottom: var(--spacing-md);
        }

        .business-principle p:last-child {
            margin-bottom: 0;
        }

        /* ===== INCIDENT RESPONSE COMPARISON ===== */
        .incident-response-comparison {
            margin-bottom: var(--spacing-2xl);
            padding: var(--spacing-2xl) 0;
        }

        .incident-response-comparison h2 {
            font-size: 1.75rem;
            color: var(--color-brand-primary);
            margin-bottom: var(--spacing-xl);
            text-align: center;
        }

        .response-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            background: white;
            border-radius: var(--radius-lg);
            padding: 16px;
            box-shadow: var(--shadow-md);
        }

        .response-column {
            border-radius: var(--radius-lg);
            padding: 20px;
            border: 2px solid;
        }

        .response-column.without-bos {
            background: #FEF3C7;
            border-color: var(--color-warning);
        }

        .response-column.with-bos {
            background: #ECFDF5;
            border-color: var(--color-success);
        }

        .response-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid;
        }

        .response-column.without-bos .response-header {
            border-bottom-color: var(--color-warning);
        }

        .response-column.with-bos .response-header {
            border-bottom-color: var(--color-success);
        }

        .response-header .icon {
            font-size: 1.5rem;
        }

        .response-header h3 {
            font-size: 1.125rem;
            color: var(--color-text-primary);
            font-weight: var(--font-weight-bold);
        }

        .response-timeline {
            margin-bottom: 20px;
        }

        .timeline-step {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            padding: 12px;
            background: white;
            border-radius: var(--radius-md);
            border-left: 3px solid;
        }

        .response-column.without-bos .timeline-step {
            border-left-color: var(--color-warning);
        }

        .response-column.with-bos .timeline-step {
            border-left-color: var(--color-success);
        }

        .timeline-step .time {
            font-family: var(--font-monospace);
            font-size: 0.8125rem;
            font-weight: var(--font-weight-bold);
            color: var(--color-text-primary);
            min-width: 60px;
            flex-shrink: 0;
        }

        .timeline-step .event {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            line-height: 1.6;
        }

        .exec-questions {
            margin-top: 8px;
            padding-left: 12px;
        }

        .exec-questions li {
            font-size: 0.8125rem;
            color: var(--color-text-secondary);
            margin-bottom: 4px;
            list-style-type: disc;
        }

        .signal-types {
            margin-top: 8px;
            padding: 8px 12px;
            background: #F0F9FF;
            border-radius: var(--radius-sm);
            font-size: 0.8125rem;
            line-height: 1.7;
        }

        .signal-types strong {
            color: var(--color-text-primary);
        }

        .signal-types .signal-type {
            display: block;
            margin-bottom: 2px;
        }

        .response-cost,
        .response-benefit {
            padding: 12px;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: var(--font-weight-semibold);
            text-align: center;
        }

        .response-cost {
            background: white;
            color: #B45309;
            border: 2px solid #FCD34D;
        }

        .response-benefit {
            background: white;
            color: #047857;
            border: 2px solid #6EE7B7;
        }

        .comparison-insight {
            margin-top: 24px;
            padding: 16px;
            background: #EFF6FF;
            border: 2px solid var(--color-info);
            border-radius: var(--radius-lg);
            text-align: center;
            font-size: 0.9375rem;
            color: var(--color-text-secondary);
            line-height: 1.7;
        }

        .comparison-insight strong {
            color: var(--color-info);
        }

        /* ===== RESPONSIVE DESIGN FOR SIDEBAR NAV ===== */
        @media (max-width: 768px) {
            .sidebar-nav {
                position: relative;
                width: 100%;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--color-gray-200);
            }

            .nav-items {
                display: flex;
                flex-wrap: wrap;
                gap: 4px;
                padding: 0 12px 12px;
            }

            .nav-item {
                margin-bottom: 0;
            }

            .nav-link {
                padding: 8px 12px;
                border-left: none;
                border-bottom: 3px solid transparent;
                font-size: 0.8125rem;
            }

            .nav-link.active {
                border-left: none;
                border-bottom-color: var(--color-brand-primary);
            }

            .landing-content {
                margin-left: 0;
                padding: var(--spacing-lg);
            }
        }


/* Component: tab-navigation */
/* Form View Container */
.form-view {
    display: none;
    min-height: 100vh;
}

.form-view.active {
    display: block;
}

/* Form Container */
.form-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--spacing-xl);
}

.form-card {
    background: white;
    border-radius: var(--border-radius);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding: var(--spacing-2xl);
}

/* Tab Navigation */
.tab-bar {
    display: flex;
    gap: 8px;
    background: var(--color-gray-50);
    padding: var(--spacing-md);
    border-bottom: 2px solid var(--color-gray-200);
    overflow-x: auto;
    flex-wrap: wrap;
}

.tab {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: white;
    border: 1px solid var(--color-gray-300);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: var(--font-size-sm);
    font-weight: 500;
    white-space: nowrap;
}

.tab:hover {
    background: var(--color-gray-100);
    border-color: var(--color-gray-400);
}

.tab.active {
    background: var(--color-wf-red);
    color: white;
    border-color: var(--color-wf-red);
}

.tab.completed {
    border-color: var(--color-success);
}

.tab-status {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background: var(--color-gray-200);
    border-radius: 50%;
    font-size: var(--font-size-xs);
    font-weight: 600;
}

.tab.active .tab-status {
    background: rgba(255, 255, 255, 0.3);
    color: white;
}

.tab.completed .tab-status {
    background: var(--color-success);
    color: white;
}

/* Tab Content */
.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}
    </style>

<!-- Generated: 2025-10-21 14:00:17  | Version: 1.2.0 | Page: bos-onboarding -->
</head>
<body>
    <div class="page-wrapper">
                <div id="landingScreen" class="landing-screen visible">
            <!-- Sticky Sidebar Navigation -->
            <nav class="sidebar-nav">
                <div class="nav-logo">
                    <h3>BOS</h3>
                    <p>Business Observability System</p>
                </div>
                <ul class="nav-items">
                    <li class="nav-item">
                        <a href="#overview" class="nav-link active">Overview</a>
                    </li>
                    <li class="nav-item">
                        <a href="#problem" class="nav-link">The Problem</a>
                    </li>
                    <li class="nav-item">
                        <a href="#solution" class="nav-link">The Solution</a>
                    </li>
                    <li class="nav-item">
                        <a href="#incident-response" class="nav-link">Incident Response</a>
                    </li>
                    <li class="nav-item">
                        <a href="#how-it-works" class="nav-link">How It Works</a>
                    </li>
                    <li class="nav-item">
                        <a href="#team-roles" class="nav-link">Team Roles</a>
                    </li>
                </ul>
            </nav>

            <div class="landing-content">
                <!-- Hero Section -->
                <div id="overview" class="landing-hero">
                    <h1 class="bos-title">Business Observability System (BOS)</h1>
                    <p class="bos-subtitle">Connecting Technical Health to Business Outcomes</p>
                </div>

                <!-- Traditional Observability Gap -->
                <div id="problem" class="observability-gap">
                    <h4>The Traditional Observability Gap</h4>
                    <p>Alert: "Payment service degraded - 2% error rate"</p>
                    <div class="scenario"><strong>Executives immediately ask:</strong>
- How many customers are blocked?
- How much money is at risk?
- Do we need to escalate now or wait?
- Which business stakeholders need notification?</div>
                    <p>Without business impact instrumentation, we assemble a cross-functional team - support, development, and product SMEs - who spend the next hour+ manually calculating these answers. The incident continues. The questions remain unanswered.</p>
                    <p>This investigation repeats every incident - unless business impact is already pre-instrumented.</p>
                    <p>BOS pre-instruments business impact signals, making them immediately visible - just like response times and error rates.</p>
                </div>

                <!-- Business Principle -->
                <div id="solution" class="business-principle">
                    <h4>The BOS Approach</h4>
                    <p>Why does this investigation keep happening?</p>
                    <p>We instrument what we build (APIs, databases, queues) but typically not what stakeholders expect (outcomes, timelines, business impact).</p>
                    <p>And each team builds their own dashboards - no standard approach, no way to navigate across 1000s of services.</p>
                    <p>BOS provides a standard pattern: business expectations become as measurable, visible, and discoverable as technical health.</p>
                </div>

                <!-- Incident Response Comparison -->
                <div id="incident-response" class="incident-response-comparison">
                    <h2>Incident Response Comparison</h2>

                    <div class="response-grid">
                        <!-- LEFT: Without BOS -->
                        <div class="response-column without-bos">
                            <div class="response-header">
                                <span class="icon"></span>
                                <h3>Without Business Impact Instrumentation</h3>
                            </div>

                            <div class="response-timeline">
                                <div class="timeline-step">
                                    <div class="time">T+0 min</div>
                                    <div class="event">
                                        <strong>Alert fires:</strong> "Payment service degraded - 2% error rate"
                                    </div>
                                </div>

                                <div class="timeline-step">
                                    <div class="time">T+5 min</div>
                                    <div class="event">
                                        <strong>Assemble cross-functional team</strong>
                                        <ul class="exec-questions">
                                            <li>Support team joins to investigate customer impact</li>
                                            <li>Development team joins to analyze technical cause</li>
                                            <li>Product SMEs join to assess business consequences</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="timeline-step">
                                    <div class="time">T+60+ min</div>
                                    <div class="event">
                                        <strong>Finally answer executive questions:</strong>
                                        <ul class="exec-questions">
                                            <li>How many customers are blocked?</li>
                                            <li>How much money is at risk?</li>
                                            <li>Which stakeholders need notification?</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="response-cost">
                                <strong>Cost:</strong> Hour+ of SME time, every incident
                            </div>
                        </div>

                        <!-- RIGHT: With BOS -->
                        <div class="response-column with-bos">
                            <div class="response-header">
                                <span class="icon"></span>
                                <h3>With BOS Pre-Instrumentation</h3>
                            </div>

                            <div class="response-timeline">
                                <div class="timeline-step">
                                    <div class="time">T+0 min</div>
                                    <div class="event">
                                        <strong>Alert fires:</strong> "Payment service degraded - 2% error rate"
                                    </div>
                                </div>

                                <div class="timeline-step">
                                    <div class="time">T+0 min</div>
                                    <div class="event">
                                        <strong>Dashboard shows all three signal types immediately:</strong>
                                        <div class="signal-types">
                                            <span class="signal-type"><strong>Technical Health:</strong> 2% error rate (triggered alert)</span>
                                            <span class="signal-type"><strong>Business Health:</strong> 99.2% vs 99.5% target (below SLO)</span>
                                            <span class="signal-type"><strong>Business Impact:</strong> 10 customers affected, $4.8M at risk</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="timeline-step">
                                    <div class="time">T+2 min</div>
                                    <div class="event">
                                        <strong>Questions already answered, response coordinated</strong>
                                        <ul class="exec-questions">
                                            <li>Customer impact: 10 blocked (visible immediately)</li>
                                            <li>Financial exposure: $4.8M (visible immediately)</li>
                                            <li>Stakeholder notifications: Triggered automatically</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="response-benefit">
                                <strong>Benefit:</strong> Hour+ saved, every incident
                            </div>
                        </div>
                    </div>

                    <div class="comparison-insight">
                        <strong>The three signal types work together:</strong> Technical health triggers the alert, Business Health shows outcome degradation, Business Impact quantifies consequences. All visible immediately - no manual investigation required.
                    </div>
                </div>

                <!-- Comparison Section - V4 Integrated -->
                <div id="how-it-works" class="landing-section">
                    <h2>Traditional Observability plus Business Observability</h2>

                    <div class="comparison-grid">
                        <!-- LEFT: Traditional Observability -->
                        <div class="comparison-column">
                            <h3>Traditional Observability</h3>
                            <p class="subtitle">Technical Health Signals</p>

                            <div class="tells-us" style="margin-top: 0; padding-top: 0; border-top: none;">
                                <strong>Tells us:</strong> Is the service working?
                            </div>

                            <div class="signal-list" style="margin-top: 14px;"><strong>Credit Check Service</strong>

 Response Time 250ms
 Bureau Connection <span class="signal-ok">OK </span>
 Valid Score Rate 98.8%
 Field Validation 99.5%</div>

                            <!-- Bridge Box -->
                            <div class="bridge-box">
                                <div class="bridge-box-content">Technical signals</div>
                                <div class="bridge-arrow"></div>
                            </div>
                        </div>

                        <!-- RIGHT: Business Observability -->
                        <div class="comparison-column">
                            <h3>Business Observability</h3>
                            <p class="subtitle">Traditional + BOS Adds Two Signal Types</p>

                            <!-- Layer 1: Business Health -->
                            <div class="bos-layer business-health">
                                <span class="layer-label"> BOS Adds: Business Health</span>

                                <div class="tells-us" style="margin-top: 8px; border-top: none;">
                                    <strong>Tells us:</strong> Is the business outcome being achieved right now?
                                </div>

                                <!-- Stakeholder Context -->
                                <div class="stakeholder-context">
                                    <strong>Stakeholder:</strong> Loan officers expect credit scores within 30 seconds
                                </div>

                                <div class="signal-list"><strong>Expectation becomes KPI:</strong>

Credit Check Success Rate
 Current: <span class="signal-warning">99.2% </span>
 Target: 99.5%
 Formula: successful / total</div>
                            </div>

                            <!-- Layer 2: Business Impact -->
                            <div class="bos-layer business-impact">
                                <span class="layer-label impact"> BOS Adds: Business Impact</span>

                                <div class="tells-us" style="margin-top: 8px; border-top: none;">
                                    <strong>Tells us:</strong> Who's affected, how much, what dimension
                                </div>

                                <div class="signal-list"><strong>Consequences (4 dimensions):</strong>

 <span class="dimension">(Customer)</span>: <span class="highlight-text">10 customers</span> blocked
 <span class="dimension">(Financial)</span>: <span class="highlight-text">$4.8M in blocked</span> transactions
 <span class="dimension">(Compliance)</span>: <span class="highlight-text">FCRA violations</span> in 3hrs
 <span class="dimension">(Operations)</span>: <span class="highlight-text">15 manual</span> interventions</div>
                            </div>
                        </div>
                    </div>

                    <!-- Summary Bar -->
                    <div class="summary-bar">
                        <strong>Traditional Observability + Business Observability = Complete Business Observability</strong>
                        <div class="detail">System/Process signals + Business Health signals + Business Impact signals = Complete visibility (mechanism + outcome + consequence)</div>
                        <div class="detail" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(139, 92, 246, 0.2);">Every service has stakeholders with expectations and business consequences when those expectations aren't met. BOS is a systematic pattern, not a custom solution.</div>
                    </div>
                </div>

                <!-- Three Roles Section -->
                <div id="team-roles" class="landing-section">
                    <h2>How Our Teams Work Together</h2>
                    <div class="role-cards">
                        <div class="role-card">
                            <div class="role-number">1</div>
                            <h4>Product Owner</h4>
                            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--spacing-md);">Defines Business Context</p>
                            <ul>
                                <li>Who are the stakeholders?</li>
                                <li>What do they expect?</li>
                                <li>What's the impact if expectations fail?</li>
                                <li>What's the business value?</li>
                            </ul>
                        </div>
                        <div class="role-card">
                            <div class="role-number">2</div>
                            <h4>Developer</h4>
                            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--spacing-md);">Implements Measurement</p>
                            <ul>
                                <li>Write the query (SQL/Splunk)</li>
                                <li>Instrument the signal</li>
                                <li>Validate against business criteria</li>
                                <li>Deploy to monitoring platform</li>
                            </ul>
                        </div>
                        <div class="role-card">
                            <div class="role-number">3</div>
                            <h4>Platform Operations</h4>
                            <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--spacing-md);">Sees Unified View</p>
                            <ul>
                                <li>Technical health (is it working?)</li>
                                <li>Business impact (who's affected?)</li>
                                <li>Executive reporting (financial impact, compliance)</li>
                                <li>Business-driven prioritization</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Resources Section -->
                <div id="resources" style="margin-top: var(--spacing-3xl); padding: var(--spacing-xl); background: var(--color-gray-50); border-left: 4px solid var(--color-wf-red); border-radius: var(--border-radius);">
                    <h4 style="margin-bottom: var(--spacing-md);">Technical Resources</h4>
                    <p style="margin-bottom: var(--spacing-sm);">For technical implementation details, data model specifications, and query patterns:</p>
                    <p><a href="../deliverables/bos-data-model-reference-v3.0.0.html" style="color: var(--color-wf-red); font-weight: 500;"> BOS Data Model v3.0 - Technical Reference</a></p>
                    <p style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-top: var(--spacing-xs);">Complete schema specifications, validation rules, and code examples for backend engineers.</p>
                </div>

                <!-- Call to Action -->
                <div class="landing-cta">
                    <h2>Ready to add business context to our observability?</h2>
                    <button class="btn btn-primary btn-large" id="btnExploreBOS">Explore Examples </button>
                </div>
            </div>
        </div>

        <!-- Inject Components -->
        <!-- Help Drawer -->
    <div class="guide-overlay" id="overlay"></div>
    <div class="help-drawer" id="drawer">
        <div class="drawer-header">
            <h2>Quick Reference</h2>
            <button class="close-btn" id="closeBtn" aria-label="Close help drawer"></button>
        </div>
        <div class="drawer-content">
            <h3>Purpose</h3>
            <p>This 4-step workflow captures essential information to add your service to the Business Observability System (BOS), aligned with the guided prompt methodology.</p>

            <h3>Workflow Overview</h3>
            <p><strong>Step 1: Business Context</strong> - Define what your service does, why it matters, and baseline performance expectations</p>
            <p><strong>Step 2: Impact Definition</strong> - Describe who is affected and what happens when the service fails</p>
            <p><strong>Step 3: Signal Definition</strong> - Create measurements that indicate service health</p>
            <p><strong>Step 4: Preview & Submit</strong> - Review your entry and validate quality</p>

            <h3>What is a Signal?</h3>
            <p>A signal is a measurement that answers a specific business question about service performance. It connects business criteria (plain language) to technical criteria (query/logic).</p>

            <h3> Complex Scenarios - Pattern Library</h3>
            <p>If your service involves these patterns, additional guidance is available:</p>
            <div class="pattern-hint">
                <strong>Business Day Calculations</strong>
                Services that must exclude weekends and holidays (e.g., TRID 3-day rule)
            </div>
            <div class="pattern-hint">
                <strong>Document Revisions</strong>
                Services with document versions where only the latest matters
            </div>
            <div class="pattern-hint">
                <strong>Forward-Looking Metrics</strong>
                Measuring "at-risk" before violation occurs (proactive intervention)
            </div>
            <div class="pattern-hint">
                <strong>Regulatory vs Business Targets</strong>
                Distinguishing mandated compliance (99.95%) from aspirational goals (99.9%)
            </div>
            <div class="pattern-hint">
                <strong>Multi-System Aggregation</strong>
                Combining data from multiple systems using correlation IDs
            </div>

            <h3>Complexity Indicators</h3>
            <p><strong> STANDARD</strong> - Straightforward metrics with basic queries</p>
            <p><strong> COMPLEX</strong> - Requires pattern library guidance (business day calc, revisions, regulatory compliance)</p>

            <h3>Complete Funding Service Example</h3>
            <div class="example-box">
                <strong>Service Name:</strong> Funding Service
            </div>
            <div class="example-box">
                <strong>Business Purpose:</strong><br>
                Execute wire transfers to complete home purchase transactions. When a home loan is approved and closing date arrives, this service transfers funds from the bank to the title company.
            </div>
            <div class="example-box">
                <strong>Signal Name:</strong> funding-success-rate
            </div>
            <div class="example-box">
                <strong>Business Criteria:</strong><br>
                The percentage of wire transfers that successfully complete on scheduled closing dates. We expect 99.5% success rate.
            </div>

            <h3>Need Help?</h3>
            <p>Contact the BOS Platform team for assistance with signal definitions, query writing, or accessing monitoring data sources.</p>
        </div>
    </div>
        <!-- Glossary Drawer -->
    <div class="glossary-drawer" id="glossaryDrawer">
        <div class="drawer-header">
            <h2>BOS Glossary</h2>
            <button class="close-btn" id="glossaryCloseBtn" aria-label="Close glossary drawer"></button>
        </div>
        <div class="drawer-content">
            <!-- Search Box -->
            <div class="glossary-search">
                <input type="text" id="glossarySearch" placeholder="Search terms..." class="glossary-search-input" />
            </div>

            <!-- Core Concepts Section -->
            <div class="glossary-section">
                <h3>Core Concepts</h3>
                <div class="glossary-term">
                    <div class="term-name">Business Observability</div>
                    <div class="term-definition">
                        Monitoring and measuring business health through stakeholder expectations, business impact, and outcomesnot just technical metrics.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Business Health Signal</div>
                    <div class="term-dual"> Business SLI (Service Level Indicator)</div>
                    <div class="term-definition">
                        A measurement that answers "Is the service delivering business value?" Examples: customers affected, revenue at risk, compliance violations.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Technical Health Signal</div>
                    <div class="term-dual"> Traditional SLI</div>
                    <div class="term-definition">
                        A measurement of technical performance. Examples: success rate, response time, error rate, availability.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Stakeholder</div>
                    <div class="term-definition">
                        Anyone who depends on the service to achieve an outcome. Examples: customers, loan officers, compliance teams, partner systems.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Expectation</div>
                    <div class="term-definition">
                        What stakeholders need the service to accomplish. Example: "Home buyers expect wire transfers to complete on their scheduled closing date."
                    </div>
                </div>
            </div>

            <!-- Measurements & Targets Section -->
            <div class="glossary-section">
                <h3>Measurements & Targets</h3>
                <div class="glossary-term">
                    <div class="term-name">Business Criteria</div>
                    <div class="term-definition">
                        Plain-language description of what you're measuring and why it matters. Written for product owners and business stakeholders.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Technical Criteria</div>
                    <div class="term-dual"> SLI Query</div>
                    <div class="term-definition">
                        The actual query, calculation, or logic that produces the measurement. Written by developers, executed by monitoring systems.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Performance Target</div>
                    <div class="term-dual"> SLO (Service Level Objective)</div>
                    <div class="term-definition">
                        The threshold that indicates acceptable performance. Example: "99.5% of transfers complete successfully."
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Time Window</div>
                    <div class="term-definition">
                        How often the signal is measured. Examples: 24h (daily), 1h (hourly), 7d (weekly).
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Success Baseline</div>
                    <div class="term-definition">
                        What "normal" looks like when the service is healthy. Describes expected performance in business terms.
                    </div>
                </div>
            </div>

            <!-- Business Impact Section -->
            <div class="glossary-section">
                <h3>Business Impact</h3>
                <div class="glossary-term">
                    <div class="term-name">Impact Category</div>
                    <div class="term-dual"> Business Impact Dimension</div>
                    <div class="term-definition">
                        The type of business consequence when service fails. Four categories: Customer Experience, Financial, Legal/Risk, Operational.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Business Consequence</div>
                    <div class="term-definition">
                        What happens to stakeholders when the service degrades or fails. Example: "Home closings are delayed, customers cannot move in on schedule."
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Financial Impact</div>
                    <div class="term-definition">
                        The monetary cost of service degradation. Includes operational overhead, customer remediation, and potential penalties.
                    </div>
                </div>
            </div>

            <!-- Technical Terms Section -->
            <div class="glossary-section">
                <h3>Technical Terms</h3>
                <div class="glossary-term">
                    <div class="term-name">Signal Status</div>
                    <div class="term-definition">
                        The current state of a signal: OK (meeting target), WARNING (approaching threshold), CRITICAL (below threshold).
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Dashboard</div>
                    <div class="term-definition">
                        Visual display of signal status, trends, and business impact. Used for monitoring and incident response.
                    </div>
                </div>
                <div class="glossary-term">
                    <div class="term-name">Playbook</div>
                    <div class="term-dual"> Runbook</div>
                    <div class="term-definition">
                        Step-by-step response procedures when a signal indicates degradation. Includes escalation paths and remediation steps.
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- Example Details Modal -->
    <div class="modal-overlay" id="exampleModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="exampleModalTitle">Service Example</h3>
                <button class="modal-close" id="exampleModalClose"></button>
            </div>
            <div class="modal-content" id="exampleModalContent">
                <!-- Content populated by JavaScript -->
            </div>
        </div>
    </div>


                        <!-- Form View Container -->
                        <div class="form-view active" id="formView">
                            <!-- Tab Navigation -->
                            <!-- Tab Navigation Bar -->
    <div class="tab-bar">
        <button class="tab active" data-tab="service-basics" id="tabServiceBasics">
            <span class="tab-status" id="statusServiceBasics">1</span>
            <span>Service Basics</span>
        </button>
        <button class="tab" data-tab="stakeholder-expectations" id="tabStakeholderExpectations">
            <span class="tab-status" id="statusStakeholderExpectations">2</span>
            <span>Expectations</span>
        </button>
        <button class="tab" data-tab="signals-business" id="tabSignalsBusiness">
            <span class="tab-status" id="statusSignalsBusiness">3</span>
            <span>Signals (Bus)</span>
        </button>
        <button class="tab" data-tab="signals-s-l-o" id="tabSignalsSLO">
            <span class="tab-status" id="statusSignalsSLO">4</span>
            <span>SLO</span>
        </button>
        <button class="tab" data-tab="signals-technical" id="tabSignalsTechnical">
            <span class="tab-status" id="statusSignalsTechnical">5</span>
            <span>Signals (Tech)</span>
        </button>
        <button class="tab" data-tab="impact-business" id="tabImpactBusiness">
            <span class="tab-status" id="statusImpactBusiness">6</span>
            <span>Impact (Bus)</span>
        </button>
        <button class="tab" data-tab="impact-technical" id="tabImpactTechnical">
            <span class="tab-status" id="statusImpactTechnical">7</span>
            <span>Impact (Tech)</span>
        </button>
        <button class="tab" data-tab="preview" id="tabPreview">
            <span class="tab-status" id="statusPreview">8</span>
            <span>Preview</span>
        </button>
    </div>

                            <!-- Form Container -->
                            <div class="form-container">
                                <div class="form-card">

                        <!-- SCREEN 1: Service Basics -->
                        <!-- PHASE 1: SERVICE DEFINITION (Product Owner) -->
                        <div class="tab-content active" id="contentServiceBasics">
                            <div class="screen-header">
                                <h3>Service Basics</h3>
                                <p class="screen-description">Let's start with the fundamentals of your service. This information helps everyone understand what this service is and who owns it.</p>
                                <div class="help-icons">
                                    <button class="help-icon" id="glossaryIcon" aria-label="Open glossary drawer"></button>
                                    <button class="help-icon" id="helpIcon" aria-label="Open help drawer"></button>
                                </div>
                            </div>

                            <!-- SCHEMA: services.serviceName -->
                            <!-- REQUIRED: true -->
                            <!-- ALSO POPULATES: services.displayName (MVP simplification) -->
                            <div class="form-group">
                                <label class="form-label critical" for="serviceName">
                                    Service Name <span class="required">*</span>
                                    <span class="template-indicator" id="indicatorServiceName"></span>
                                </label>
                                <div class="field-hint">What do you call this service? This name will be used throughout BOS.</div>
                                <input
                                    type="text"
                                    id="serviceName"
                                    name="serviceName"
                                    class="form-input critical"
                                    placeholder="e.g., Treasury Order Funding Service"
                                    required
                                />
                            </div>

                            <!-- SCHEMA: services.businessPurpose -->
                            <!-- REQUIRED: true -->
                            <div class="form-group">
                                <label class="form-label" for="businessPurpose">
                                    Business Purpose <span class="required">*</span>
                                    <span class="template-indicator" id="indicatorBusinessPurpose"></span>
                                </label>
                                <div class="field-hint">What business problem does this service solve? Focus on business value, not technical implementation.</div>
                                <textarea
                                    id="businessPurpose"
                                    name="businessPurpose"
                                    class="form-input medium"
                                    placeholder="Example: Ensures treasury orders are funded accurately and on time to support business operations..."
                                    required
                                ></textarea>
                            </div>

                            <!-- SCHEMA: services.org_id -->
                            <!-- REQUIRED: true -->
                            <!-- FK: org_products(org_id) -->
                            <div class="form-group">
                                <label class="form-label" for="org_id">
                                    L4 Product Line / L3 Product <span class="required">*</span>
                                    <span class="template-indicator" id="indicatorOrgId"></span>
                                </label>
                                <div class="field-hint">Which product line and product does this service belong to? This helps organize services by business unit.</div>
                                <select
                                    id="org_id"
                                    name="org_id"
                                    class="form-input"
                                    required
                                >
                                    <option value="">-- Select Product Line and Product --</option>
                                    <!-- Options populated from org_products table -->
                                    <!-- Format: "L4 Name  L3 Name" -->
                                </select>
                            </div>

                            <!-- SCHEMA: services.productOwner -->
                            <!-- REQUIRED: true -->
                            <div class="form-group">
                                <label class="form-label" for="productOwner">
                                    Product Owner <span class="required">*</span>
                                    <span class="template-indicator" id="indicatorProductOwner"></span>
                                </label>
                                <div class="field-hint">Who is the product owner for this service? (Email address recommended)</div>
                                <input
                                    type="text"
                                    id="productOwner"
                                    name="productOwner"
                                    class="form-input"
                                    placeholder="e.g., jane.smith@company.com"
                                    required
                                />
                            </div>

                            <div class="form-actions">
                                <div class="progress-indicator">
                                    <span>Step 1 of 8</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 14%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-primary" id="btnNextToExpectations">
                                    Next: Stakeholder Expectations 
                                </button>
                            </div>
                        </div>


                        <!-- SCREEN 2: Stakeholder Expectations (REPEATABLE) -->
                        <!-- PHASE 1: SERVICE DEFINITION (Product Owner) -->
                        <div class="tab-content" id="contentStakeholderExpectations">
                            <div class="screen-header">
                                <h3>Stakeholder Expectations</h3>
                                <p class="screen-description">Define who depends on this service and what they expect. Think of each expectation as a user story acceptance criterion.</p>
                                <p class="design-note"><strong>Pattern:</strong> As a [who], I expect [what]. If broken: [impact]</p>
                            </div>

                            <!-- Container for multiple expectations -->
                            <div id="expectationsContainer">
                                <!-- Expectation Template (repeatable) -->
                                <div class="expectation-item" data-expectation-index="0">
                                    <div class="item-header">
                                        <h4>Expectation #<span class="expectation-number">1</span></h4>
                                        <button type="button" class="btn-remove" data-action="removeExpectation" style="display: none;">Remove</button>
                                    </div>

                                    <!-- User Story Format Section -->
                                    <div class="user-story-section">
                                        <div class="user-story-label">As a...</div>

                                        <!-- SCHEMA: stakeholder_expectations_context.stakeholderType -->
                                        <!-- REQUIRED: true -->
                                        <!-- FK: stakeholder_types(code) -->
                                        <div class="form-group">
                                            <label class="form-label" for="stakeholderType_0">
                                                Stakeholder Type <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Who is this stakeholder? (e.g., Customer, Internal Team, Partner)</div>
                                            <select
                                                id="stakeholderType_0"
                                                name="stakeholderType_0"
                                                class="form-input"
                                                required
                                            >
                                                <option value="">-- Select Stakeholder Type --</option>
                                                <!-- Options populated from stakeholder_types table -->
                                            </select>
                                        </div>

                                        <!-- SCHEMA: stakeholder_expectations_context.stakeholderGroup -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="stakeholderGroup_0">
                                                Specific Group <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Which specific group within this stakeholder type?</div>
                                            <input
                                                type="text"
                                                id="stakeholderGroup_0"
                                                name="stakeholderGroup_0"
                                                class="form-input"
                                                placeholder="e.g., Home Lending Processors, Credit Risk Team"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div class="user-story-section">
                                        <div class="user-story-label">I expect...</div>

                                        <!-- SCHEMA: stakeholder_expectations_context.expectationStatement -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="expectationStatement_0">
                                                Expectation Statement <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Complete this sentence: As this stakeholder, I expect...</div>
                                            <textarea
                                                id="expectationStatement_0"
                                                name="expectationStatement_0"
                                                class="form-input medium"
                                                placeholder="e.g., credit checks to complete within 30 seconds during business hours"
                                                required
                                            ></textarea>
                                        </div>
                                    </div>

                                    <div class="user-story-section">
                                        <div class="user-story-label">Impact if broken...</div>

                                        <!-- SCHEMA: stakeholder_expectations_context.impactDescription -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactDescription_0">
                                                Impact Description <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">What happens if this expectation is not met?</div>
                                            <textarea
                                                id="impactDescription_0"
                                                name="impactDescription_0"
                                                class="form-input short"
                                                placeholder="e.g., loan applications are delayed, customer experience degraded"
                                                required
                                            ></textarea>
                                        </div>

                                        <!-- SCHEMA: stakeholder_expectations_context.impactCategory -->
                                        <!-- REQUIRED: true -->
                                        <!-- FK: impact_categories(code) -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactCategory_0">
                                                Impact Category <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">What type of impact does this have?</div>
                                            <select
                                                id="impactCategory_0"
                                                name="impactCategory_0"
                                                class="form-input"
                                                required
                                            >
                                                <option value="">-- Select Impact Category --</option>
                                                <!-- Options populated from impact_categories table -->
                                                <!-- customer_experience, financial, legal_risk, operational -->
                                            </select>
                                        </div>

                                        <!-- SCHEMA: stakeholder_expectations_context.priority -->
                                        <!-- REQUIRED: true -->
                                        <!-- FK: priority_levels(code) -->
                                        <div class="form-group">
                                            <label class="form-label" for="priority_0">
                                                Priority <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">How critical is this expectation?</div>
                                            <select
                                                id="priority_0"
                                                name="priority_0"
                                                class="form-input"
                                                required
                                            >
                                                <option value="">-- Select Priority --</option>
                                                <!-- Options populated from priority_levels table -->
                                                <!-- CRITICAL, HIGH, MEDIUM, LOW -->
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-actions-secondary">
                                <button type="button" class="btn btn-secondary" id="btnAddExpectation">
                                    + Add Another Expectation
                                </button>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary-outline" id="btnBackToBasics">
                                     Back
                                </button>
                                <div class="progress-indicator">
                                    <span>Step 2 of 8</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 29%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-primary" id="btnNextToSignalsBusiness">
                                    Next: Define Signals 
                                </button>
                            </div>
                        </div>


                        <!-- SCREEN 3: Define Signals - Business Definition (REPEATABLE) -->
                        <!-- PHASE 2: SIGNAL DEFINITION (Product Owner  Developer) -->
                        <div class="tab-content" id="contentSignalsBusiness">
                            <div class="screen-header">
                                <h3>Define Signals - Business Definition</h3>
                                <p class="screen-description">Define what you need to measure to know if your service is meeting expectations. Focus on business outcomes, not technical metrics.</p>
                                <p class="design-note"><strong>Pattern:</strong> I need to measure [what], which means [definition], so that I know [which expectation this validates]</p>
                            </div>

                            <!-- Container for multiple signals -->
                            <div id="signalsContainer">
                                <!-- Signal Template (repeatable) -->
                                <div class="signal-item" data-signal-index="0">
                                    <div class="item-header">
                                        <h4>Signal #<span class="signal-number">1</span></h4>
                                        <button type="button" class="btn-remove" data-action="removeSignal" style="display: none;">Remove</button>
                                    </div>

                                    <!-- User Story Format Section -->
                                    <div class="user-story-section">
                                        <div class="user-story-label">As a Product Owner...</div>

                                        <!-- SCHEMA: signal_definitions.signal_display_name -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="signalDisplayName_0">
                                                I need to measure... <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">What do you want to measure? Use business-friendly language.</div>
                                            <input
                                                type="text"
                                                id="signalDisplayName_0"
                                                name="signalDisplayName_0"
                                                class="form-input"
                                                placeholder="e.g., Credit Check Success Rate"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div class="user-story-section">
                                        <div class="user-story-label">Which means...</div>

                                        <!-- SCHEMA: signal_definitions.description_business -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="descriptionBusiness_0">
                                                Business Definition <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Define this in business terms. What does this measurement tell you?</div>
                                            <textarea
                                                id="descriptionBusiness_0"
                                                name="descriptionBusiness_0"
                                                class="form-input medium"
                                                placeholder="e.g., The percentage of credit check requests that complete successfully without errors or timeouts"
                                                required
                                            ></textarea>
                                        </div>
                                    </div>

                                    <div class="user-story-section">
                                        <div class="user-story-label">So that I know...</div>

                                        <!-- UI GUIDANCE ONLY - NOT STORED IN DATABASE -->
                                        <!-- DECISION: Helps PO think about purpose without schema complexity -->
                                        <!-- FUTURE: May add business_outcome field to schema -->
                                        <div class="form-group">
                                            <label class="form-label" for="soThatIKnow_0">
                                                Purpose / Outcome
                                                <span class="ui-only-indicator" title="UI guidance only - not stored in database"> UI only</span>
                                            </label>
                                            <div class="field-hint">Which stakeholder expectation does this signal help validate? (This helps you think through the connection but is not stored.)</div>
                                            <textarea
                                                id="soThatIKnow_0"
                                                name="soThatIKnow_0"
                                                class="form-input short ui-guidance-field"
                                                placeholder="e.g., whether we're meeting the 30-second credit check expectation for home lending processors"
                                            ></textarea>
                                        </div>
                                    </div>

                                    <!-- SCHEMA: signal_definitions.observability_layer -->
                                    <!-- REQUIRED: true -->
                                    <!-- VALUES: Business, Process, System -->
                                    <div class="form-group">
                                        <label class="form-label" for="observabilityLayer_0">
                                            What level is this? <span class="required">*</span>
                                        </label>
                                        <div class="field-hint">Is this a business outcome, process step, or system metric?</div>
                                        <select
                                            id="observabilityLayer_0"
                                            name="observabilityLayer_0"
                                            class="form-input"
                                            required
                                        >
                                            <option value="">-- Select Observability Layer --</option>
                                            <option value="Business">Business - Business outcomes and value delivery</option>
                                            <option value="Process">Process - End-to-end process flows</option>
                                            <option value="System">System - Technical system health</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-actions-secondary">
                                <button type="button" class="btn btn-secondary" id="btnAddSignal">
                                    + Add Another Signal
                                </button>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary-outline" id="btnBackToExpectations">
                                     Back
                                </button>
                                <div class="progress-indicator">
                                    <span>Step 3 of 8</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 43%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-primary" id="btnNextToSLO">
                                    Next: SLO Targets (Optional) 
                                </button>
                            </div>
                        </div>


                        <!-- SCREEN 4: SLO Targets (OPTIONAL, per signal) -->
                        <!-- PHASE 2: SIGNAL DEFINITION (Product Owner  Developer) -->
                        <div class="tab-content" id="contentSignalsSLO">
                            <div class="screen-header">
                                <h3>SLO Targets (Optional)</h3>
                                <p class="screen-description">Set target performance levels for your signals. You can skip this and add targets later as your practice matures.</p>
                                <div class="info-callout">
                                    <strong> Optional Screen:</strong> SLO targets help you measure "good enough" performance, but they're not required to get started with BOS.
                                </div>
                            </div>

                            <!-- Container for SLO targets (one per signal) -->
                            <div id="sloTargetsContainer">
                                <!-- SLO Target Template (one per signal from previous screen) -->
                                <div class="slo-target-item" data-signal-index="0">
                                    <!-- Show business context from previous screen -->
                                    <div class="context-section">
                                        <h4>Signal: <span class="signal-name-display">Credit Check Success Rate</span></h4>
                                        <div class="context-text">
                                            <strong>Business Definition:</strong> <span class="signal-definition-display">The percentage of credit check requests that complete successfully without errors or timeouts</span>
                                        </div>
                                    </div>

                                    <div class="slo-section">
                                        <div class="acceptance-criteria-label">Success is...</div>

                                        <!-- SCHEMA: signal_definitions.sloTarget -->
                                        <!-- REQUIRED: false (optional screen) -->
                                        <div class="form-group inline-group">
                                            <label class="form-label" for="sloTarget_0">
                                                Target
                                            </label>
                                            <div class="field-hint">What is the target percentage or value? (e.g., 99.5 for 99.5%)</div>
                                            <input
                                                type="number"
                                                id="sloTarget_0"
                                                name="sloTarget_0"
                                                class="form-input short"
                                                placeholder="99.5"
                                                min="0"
                                                max="100"
                                                step="0.01"
                                            />
                                            <span class="inline-label">%</span>
                                        </div>

                                        <!-- SCHEMA: signal_definitions.timeWindow -->
                                        <!-- REQUIRED: false (optional screen) -->
                                        <div class="form-group">
                                            <label class="form-label" for="timeWindow_0">
                                                Over Time Window
                                            </label>
                                            <div class="field-hint">Over what time period should this target be met?</div>
                                            <select
                                                id="timeWindow_0"
                                                name="timeWindow_0"
                                                class="form-input"
                                            >
                                                <option value="">-- Select Time Window --</option>
                                                <option value="24h">24 hours (1 day)</option>
                                                <option value="7d">7 days (1 week)</option>
                                                <option value="30d">30 days (1 month)</option>
                                                <option value="90d">90 days (1 quarter)</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="slo-section">
                                        <div class="acceptance-criteria-label">Because...</div>

                                        <!-- SCHEMA: signal_definitions.sloTargetRationale -->
                                        <!-- REQUIRED: false (optional screen) -->
                                        <div class="form-group">
                                            <label class="form-label" for="sloTargetRationale_0">
                                                Why this target?
                                            </label>
                                            <div class="field-hint">What is the business justification for this target?</div>
                                            <textarea
                                                id="sloTargetRationale_0"
                                                name="sloTargetRationale_0"
                                                class="form-input medium"
                                                placeholder="e.g., Based on historical performance and stakeholder expectations for loan processing speed..."
                                            ></textarea>
                                        </div>
                                    </div>

                                    <hr class="item-separator" />
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary-outline" id="btnBackToSignalsBusiness">
                                     Back
                                </button>
                                <div class="progress-indicator">
                                    <span>Step 4 of 8 (Optional)</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 57%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-secondary" id="btnSkipSLO">
                                    Skip SLO Targets
                                </button>
                                <button type="button" class="btn btn-primary" id="btnNextToSignalsTechnical">
                                    Next: Technical Implementation 
                                </button>
                            </div>
                        </div>


                        <!-- SCREEN 5: Signal Technical Implementation (Developer, per signal) -->
                        <!-- PHASE 2: SIGNAL DEFINITION (Product Owner  Developer) -->
                        <div class="tab-content" id="contentSignalsTechnical">
                            <div class="screen-header">
                                <h3>Signal Technical Implementation</h3>
                                <p class="screen-description">Implement the technical details for each signal defined by the Product Owner. Choose the signal type and provide the measurement queries.</p>
                                <div class="info-callout">
                                    <strong>Developer Handoff:</strong> The Product Owner defined what to measure. You'll define how to measure it.
                                </div>
                            </div>

                            <!-- Container for technical implementations (one per signal) -->
                            <div id="signalsTechnicalContainer">
                                <!-- Technical Implementation Template (one per signal) -->
                                <div class="signal-technical-item" data-signal-index="0">
                                    <!-- Show business context from PO -->
                                    <div class="context-section po-context">
                                        <div class="context-header">Product Owner Context</div>
                                        <h4>Signal: <span class="signal-name-display">Credit Check Success Rate</span></h4>
                                        <div class="context-text">
                                            <strong>Business Definition:</strong> <span class="signal-definition-display">The percentage of credit check requests that complete successfully without errors or timeouts</span>
                                        </div>
                                        <div class="context-text">
                                            <strong>Level:</strong> <span class="observability-layer-display">Process</span>
                                        </div>
                                    </div>

                                    <div class="technical-implementation-section">
                                        <h5>Technical Implementation</h5>

                                        <!-- SCHEMA: signal_definitions.signal_type -->
                                        <!-- REQUIRED: true -->
                                        <!-- VALUES: sli_ratio, sli_threshold -->
                                        <div class="form-group">
                                            <label class="form-label" for="signalType_0">
                                                Signal Type <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">How is this signal measured?</div>
                                            <select
                                                id="signalType_0"
                                                name="signalType_0"
                                                class="form-input signal-type-selector"
                                                data-signal-index="0"
                                                required
                                            >
                                                <option value="">-- Select Signal Type --</option>
                                                <option value="sli_ratio">Ratio - Good events / Total events (percentage)</option>
                                                <option value="sli_threshold">Threshold - Value compared to threshold (count, latency, etc.)</option>
                                            </select>
                                        </div>

                                        <!-- Common Fields (all signal types) -->

                                        <!-- SCHEMA: signal_definitions.data_source -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="dataSource_0">
                                                Data Source <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Where does this data come from?</div>
                                            <input
                                                type="text"
                                                id="dataSource_0"
                                                name="dataSource_0"
                                                class="form-input"
                                                placeholder="e.g., Splunk, Prometheus, Database, API"
                                                required
                                            />
                                        </div>

                                        <!-- SCHEMA: signal_definitions.data_source_details -->
                                        <!-- REQUIRED: false -->
                                        <div class="form-group">
                                            <label class="form-label" for="dataSourceDetails_0">
                                                Data Source Details
                                            </label>
                                            <div class="field-hint">Additional details (connection string, index name, table name, etc.)</div>
                                            <textarea
                                                id="dataSourceDetails_0"
                                                name="dataSourceDetails_0"
                                                class="form-input short"
                                                placeholder="e.g., index=creditcheck_logs sourcetype=api_response"
                                            ></textarea>
                                        </div>

                                        <!-- SCHEMA: signal_definitions.technical_owner -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="technicalOwner_0">
                                                Technical Owner <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Who maintains this signal implementation? (Email address)</div>
                                            <input
                                                type="text"
                                                id="technicalOwner_0"
                                                name="technicalOwner_0"
                                                class="form-input"
                                                placeholder="e.g., dev.team@company.com"
                                                required
                                            />
                                        </div>

                                        <!-- SCHEMA: signal_definitions.description_technical -->
                                        <!-- REQUIRED: false -->
                                        <div class="form-group">
                                            <label class="form-label" for="descriptionTechnical_0">
                                                Technical Notes
                                            </label>
                                            <div class="field-hint">Implementation notes for developers</div>
                                            <textarea
                                                id="descriptionTechnical_0"
                                                name="descriptionTechnical_0"
                                                class="form-input medium"
                                                placeholder="e.g., Query filters for status=success, excludes test transactions..."
                                            ></textarea>
                                        </div>

                                        <!-- Ratio-Specific Fields (shown when signal_type=sli_ratio) -->
                                        <div class="ratio-fields" data-signal-index="0" style="display: none;">
                                            <h6>Ratio Signal Fields</h6>

                                            <!-- SCHEMA: signal_definitions.query_numerator -->
                                            <!-- REQUIRED: true (for ratio signals) -->
                                            <div class="form-group">
                                                <label class="form-label" for="queryNumerator_0">
                                                    Good Events Query <span class="required">*</span>
                                                </label>
                                                <div class="field-hint">Query to count successful/good events (numerator)</div>
                                                <textarea
                                                    id="queryNumerator_0"
                                                    name="queryNumerator_0"
                                                    class="form-input medium code-input"
                                                    placeholder="e.g., SELECT COUNT(*) FROM credit_checks WHERE status='success'"
                                                ></textarea>
                                            </div>

                                            <!-- SCHEMA: signal_definitions.query_denominator -->
                                            <!-- REQUIRED: true (for ratio signals) -->
                                            <div class="form-group">
                                                <label class="form-label" for="queryDenominator_0">
                                                    Total Events Query <span class="required">*</span>
                                                </label>
                                                <div class="field-hint">Query to count all events (denominator)</div>
                                                <textarea
                                                    id="queryDenominator_0"
                                                    name="queryDenominator_0"
                                                    class="form-input medium code-input"
                                                    placeholder="e.g., SELECT COUNT(*) FROM credit_checks"
                                                ></textarea>
                                            </div>
                                        </div>

                                        <!-- Threshold-Specific Fields (shown when signal_type=sli_threshold) -->
                                        <div class="threshold-fields" data-signal-index="0" style="display: none;">
                                            <h6>Threshold Signal Fields</h6>

                                            <!-- SCHEMA: signal_definitions.query_numerator (reused for threshold) -->
                                            <!-- REQUIRED: true (for threshold signals) -->
                                            <div class="form-group">
                                                <label class="form-label" for="queryMeasurement_0">
                                                    Measurement Query <span class="required">*</span>
                                                </label>
                                                <div class="field-hint">Query to get the measurement value to compare against threshold</div>
                                                <textarea
                                                    id="queryMeasurement_0"
                                                    name="queryMeasurement_0"
                                                    class="form-input medium code-input"
                                                    placeholder="e.g., SELECT AVG(response_time_ms) FROM credit_checks WHERE timestamp > now() - 5m"
                                                ></textarea>
                                            </div>

                                            <!-- SCHEMA: signal_definitions.threshold_operator -->
                                            <!-- REQUIRED: true (for threshold signals) -->
                                            <div class="form-group">
                                                <label class="form-label" for="thresholdOperator_0">
                                                    Threshold Operator <span class="required">*</span>
                                                </label>
                                                <div class="field-hint">How should the measured value be compared to the threshold?</div>
                                                <select
                                                    id="thresholdOperator_0"
                                                    name="thresholdOperator_0"
                                                    class="form-input"
                                                >
                                                    <option value="">-- Select Operator --</option>
                                                    <option value="lt">Less Than (<)</option>
                                                    <option value="lte">Less Than or Equal (<=)</option>
                                                    <option value="gt">Greater Than (>)</option>
                                                    <option value="gte">Greater Than or Equal (>=)</option>
                                                    <option value="eq">Equal To (=)</option>
                                                </select>
                                            </div>

                                            <!-- SCHEMA: signal_definitions.threshold_value -->
                                            <!-- REQUIRED: true (for threshold signals) -->
                                            <div class="form-group inline-group">
                                                <label class="form-label" for="thresholdValue_0">
                                                    Threshold Value <span class="required">*</span>
                                                </label>
                                                <div class="field-hint">The threshold value to compare against</div>
                                                <input
                                                    type="number"
                                                    id="thresholdValue_0"
                                                    name="thresholdValue_0"
                                                    class="form-input short"
                                                    placeholder="e.g., 5000"
                                                    step="any"
                                                />
                                            </div>

                                            <!-- SCHEMA: signal_definitions.threshold_unit -->
                                            <!-- REQUIRED: false -->
                                            <div class="form-group">
                                                <label class="form-label" for="thresholdUnit_0">
                                                    Unit
                                                </label>
                                                <div class="field-hint">Unit of measurement (optional)</div>
                                                <input
                                                    type="text"
                                                    id="thresholdUnit_0"
                                                    name="thresholdUnit_0"
                                                    class="form-input short"
                                                    placeholder="e.g., ms, seconds, requests"
                                                />
                                            </div>
                                        </div>
                                    </div>

                                    <hr class="item-separator" />
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary-outline" id="btnBackToSLO">
                                     Back
                                </button>
                                <div class="progress-indicator">
                                    <span>Step 5 of 8</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 71%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-primary" id="btnNextToImpactBusiness">
                                    Next: Business Impact 
                                </button>
                            </div>
                        </div>


                        <!-- SCREEN 6: Impact Definition - Business (REPEATABLE) -->
                        <!-- PHASE 3: BUSINESS IMPACT SIGNALS (Product Owner  Developer) -->
                        <div class="tab-content" id="contentImpactBusiness">
                            <div class="screen-header">
                                <h3>Business Impact Definition</h3>
                                <p class="screen-description">Define how you measure the business impact when this service fails. Impact signals answer: How many customers/dollars/transactions are affected?</p>
                                <p class="design-note"><strong>Pattern:</strong> I need to measure [what impact], which means [definition], so that I know [how to quantify consequences]</p>
                            </div>

                            <!-- Container for multiple impact signals -->
                            <div id="impactsContainer">
                                <!-- Impact Signal Template (repeatable) -->
                                <div class="impact-item" data-impact-index="0">
                                    <div class="item-header">
                                        <h4>Impact Signal #<span class="impact-number">1</span></h4>
                                        <button type="button" class="btn-remove" data-action="removeImpact" style="display: none;">Remove</button>
                                    </div>

                                    <!-- User Story Format Section -->
                                    <div class="user-story-section">
                                        <div class="user-story-label">As a Product Owner...</div>

                                        <!-- SCHEMA: signal_definitions.signal_display_name -->
                                        <!-- REQUIRED: true -->
                                        <!-- NOTE: signal_type will be auto-set to 'business_impact' -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactDisplayName_0">
                                                I need to measure... <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">What impact do you want to measure?</div>
                                            <input
                                                type="text"
                                                id="impactDisplayName_0"
                                                name="impactDisplayName_0"
                                                class="form-input"
                                                placeholder="e.g., Customers Affected by Credit Check Failures"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <div class="user-story-section">
                                        <div class="user-story-label">Which means...</div>

                                        <!-- SCHEMA: signal_definitions.description_business -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactDescriptionBusiness_0">
                                                Business Definition <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Define this impact in business terms. What are you counting?</div>
                                            <textarea
                                                id="impactDescriptionBusiness_0"
                                                name="impactDescriptionBusiness_0"
                                                class="form-input medium"
                                                placeholder="e.g., The number of unique customers who experienced a credit check failure that prevented loan application progress"
                                                required
                                            ></textarea>
                                        </div>
                                    </div>

                                    <div class="user-story-section">
                                        <div class="user-story-label">So that I know...</div>

                                        <!-- UI GUIDANCE ONLY - NOT STORED IN DATABASE -->
                                        <!-- Same pattern as signals-business screen -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactSoThatIKnow_0">
                                                Purpose / Outcome
                                                <span class="ui-only-indicator" title="UI guidance only - not stored in database"> UI only</span>
                                            </label>
                                            <div class="field-hint">How does this help you understand business consequences? (Not stored)</div>
                                            <textarea
                                                id="impactSoThatIKnow_0"
                                                name="impactSoThatIKnow_0"
                                                class="form-input short ui-guidance-field"
                                                placeholder="e.g., the scale of customer experience degradation during incidents"
                                            ></textarea>
                                        </div>
                                    </div>

                                    <!-- SCHEMA: signal_definitions.impact_category -->
                                    <!-- REQUIRED: true -->
                                    <!-- FK: impact_categories(code) -->
                                    <div class="form-group">
                                        <label class="form-label" for="impactCategoryBusiness_0">
                                            Impact Category <span class="required">*</span>
                                        </label>
                                        <div class="field-hint">What type of impact is this?</div>
                                        <select
                                            id="impactCategoryBusiness_0"
                                            name="impactCategoryBusiness_0"
                                            class="form-input"
                                            required
                                        >
                                            <option value="">-- Select Impact Category --</option>
                                            <!-- Options populated from impact_categories table -->
                                            <!-- customer_experience, financial, legal_risk, operational -->
                                        </select>
                                    </div>

                                    <!-- SCHEMA: signal_definitions.impact_unit -->
                                    <!-- REQUIRED: true -->
                                    <div class="form-group">
                                        <label class="form-label" for="impactUnit_0">
                                            Impact Unit <span class="required">*</span>
                                        </label>
                                        <div class="field-hint">What unit measures this impact?</div>
                                        <select
                                            id="impactUnit_0"
                                            name="impactUnit_0"
                                            class="form-input"
                                            required
                                        >
                                            <option value="">-- Select Unit --</option>
                                            <option value="customers">Customers</option>
                                            <option value="dollars">Dollars</option>
                                            <option value="transactions">Transactions</option>
                                            <option value="accounts">Accounts</option>
                                            <option value="cases">Cases</option>
                                            <option value="requests">Requests</option>
                                            <option value="other">Other (specify in technical notes)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-actions-secondary">
                                <button type="button" class="btn btn-secondary" id="btnAddImpact">
                                    + Add Another Impact Signal
                                </button>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary-outline" id="btnBackToSignalsTechnical">
                                     Back
                                </button>
                                <div class="progress-indicator">
                                    <span>Step 6 of 8</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 86%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-primary" id="btnNextToImpactTechnical">
                                    Next: Impact Implementation 
                                </button>
                            </div>
                        </div>


                        <!-- SCREEN 7: Impact Technical Implementation (Developer, per impact) -->
                        <!-- PHASE 3: BUSINESS IMPACT SIGNALS (Product Owner  Developer) -->
                        <div class="tab-content" id="contentImpactTechnical">
                            <div class="screen-header">
                                <h3>Impact Technical Implementation</h3>
                                <p class="screen-description">Implement the technical measurement for each business impact signal. Define how to calculate the impact values.</p>
                                <div class="info-callout">
                                    <strong>Developer Handoff:</strong> The Product Owner defined what impact to measure. You'll define how to calculate it.
                                </div>
                            </div>

                            <!-- Container for technical implementations (one per impact signal) -->
                            <div id="impactsTechnicalContainer">
                                <!-- Technical Implementation Template (one per impact signal) -->
                                <div class="impact-technical-item" data-impact-index="0">
                                    <!-- Show business context from PO -->
                                    <div class="context-section po-context">
                                        <div class="context-header">Product Owner Context</div>
                                        <h4>Impact Signal: <span class="impact-name-display">Customers Affected by Credit Check Failures</span></h4>
                                        <div class="context-text">
                                            <strong>Business Definition:</strong> <span class="impact-definition-display">The number of unique customers who experienced a credit check failure that prevented loan application progress</span>
                                        </div>
                                        <div class="context-text">
                                            <strong>Impact Category:</strong> <span class="impact-category-display">Customer Experience</span>
                                        </div>
                                        <div class="context-text">
                                            <strong>Unit:</strong> <span class="impact-unit-display">Customers</span>
                                        </div>
                                    </div>

                                    <div class="technical-implementation-section">
                                        <h5>Technical Implementation</h5>

                                        <!-- SCHEMA: signal_definitions.query_numerator (reused for business_impact) -->
                                        <!-- REQUIRED: true -->
                                        <!-- NOTE: signal_type auto-set to 'business_impact' -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactQuery_0">
                                                Impact Measurement Query <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Query to calculate the impact value (e.g., count of customers, sum of dollars)</div>
                                            <textarea
                                                id="impactQuery_0"
                                                name="impactQuery_0"
                                                class="form-input large code-input"
                                                placeholder="e.g., SELECT COUNT(DISTINCT customer_id) FROM credit_checks WHERE status='failed' AND timestamp >= now() - 1h"
                                                required
                                            ></textarea>
                                        </div>

                                        <!-- SCHEMA: signal_definitions.description_technical -->
                                        <!-- REQUIRED: false -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactDescriptionTechnical_0">
                                                Technical Description
                                            </label>
                                            <div class="field-hint">Implementation notes for developers</div>
                                            <textarea
                                                id="impactDescriptionTechnical_0"
                                                name="impactDescriptionTechnical_0"
                                                class="form-input medium"
                                                placeholder="e.g., Query uses window function to deduplicate customers across multiple failed attempts..."
                                            ></textarea>
                                        </div>

                                        <!-- SCHEMA: signal_definitions.data_source -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactDataSource_0">
                                                Data Source <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Where does this impact data come from?</div>
                                            <input
                                                type="text"
                                                id="impactDataSource_0"
                                                name="impactDataSource_0"
                                                class="form-input"
                                                placeholder="e.g., Splunk, Database, CRM, Data Warehouse"
                                                required
                                            />
                                        </div>

                                        <!-- SCHEMA: signal_definitions.data_source_details -->
                                        <!-- REQUIRED: false -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactDataSourceDetails_0">
                                                Data Source Details
                                            </label>
                                            <div class="field-hint">Additional details (connection string, index name, table name, etc.)</div>
                                            <textarea
                                                id="impactDataSourceDetails_0"
                                                name="impactDataSourceDetails_0"
                                                class="form-input short"
                                                placeholder="e.g., index=application_logs, table=customer_transactions"
                                            ></textarea>
                                        </div>

                                        <!-- SCHEMA: signal_definitions.technical_owner -->
                                        <!-- REQUIRED: true -->
                                        <div class="form-group">
                                            <label class="form-label" for="impactTechnicalOwner_0">
                                                Technical Owner <span class="required">*</span>
                                            </label>
                                            <div class="field-hint">Who maintains this impact signal implementation? (Email address)</div>
                                            <input
                                                type="text"
                                                id="impactTechnicalOwner_0"
                                                name="impactTechnicalOwner_0"
                                                class="form-input"
                                                placeholder="e.g., dev.team@company.com"
                                                required
                                            />
                                        </div>
                                    </div>

                                    <hr class="item-separator" />
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary-outline" id="btnBackToImpactBusiness">
                                     Back
                                </button>
                                <div class="progress-indicator">
                                    <span>Step 7 of 8</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 100%;"></div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-primary" id="btnNextToPreview">
                                    Next: Preview & Submit 
                                </button>
                            </div>
                        </div>


                        <!-- SCREEN 8: Preview & Submit -->
                        <div class="tab-content" id="contentPreview">
                            <div class="preview-container">
                                <div class="preview-header">
                                    <h3>Review & Submit</h3>
                                    <p>Review your BOS service definition before submitting</p>
                                    <div id="previewCompletionBadge"></div>
                                </div>

                                <!-- Service Basics -->
                                <div class="preview-card">
                                    <div class="preview-section-title"> Service Basics</div>
                                    <div class="preview-field">
                                        <div class="preview-field-label">Service Name</div>
                                        <div class="preview-field-value" id="previewServiceName">(Not yet entered)</div>
                                    </div>
                                    <div class="preview-field">
                                        <div class="preview-field-label">Business Purpose</div>
                                        <div class="preview-field-value" id="previewBusinessPurpose">(Not yet entered)</div>
                                    </div>
                                    <div class="preview-field">
                                        <div class="preview-field-label">Product Line / Product</div>
                                        <div class="preview-field-value" id="previewOrgId">(Not yet entered)</div>
                                    </div>
                                    <div class="preview-field">
                                        <div class="preview-field-label">Product Owner</div>
                                        <div class="preview-field-value" id="previewProductOwner">(Not yet entered)</div>
                                    </div>
                                </div>

                                <!-- Stakeholder Expectations -->
                                <div class="preview-card">
                                    <div class="preview-section-title"> Stakeholder Expectations</div>
                                    <div id="previewExpectationsContainer">
                                        <div class="preview-expectation">
                                            <div class="preview-field-label"><strong>Expectation #1</strong></div>
                                            <div class="preview-field">
                                                <em>As a</em> <span id="previewStakeholder_0">[stakeholder]</span> / <span id="previewStakeholderGroup_0">[group]</span>
                                            </div>
                                            <div class="preview-field">
                                                <em>I expect</em> <span id="previewExpectation_0">[expectation]</span>
                                            </div>
                                            <div class="preview-field">
                                                <em>Impact if broken:</em> <span id="previewImpactDesc_0">[impact]</span>
                                            </div>
                                            <div class="preview-field">
                                                <em>Category:</em> <span id="previewImpactCat_0">[category]</span> |
                                                <em>Priority:</em> <span id="previewPriority_0">[priority]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Signals -->
                                <div class="preview-card">
                                    <div class="preview-section-title"> Signals (Service Health)</div>
                                    <div id="previewSignalsContainer">
                                        <div class="preview-signal">
                                            <div class="preview-field-label"><strong>Signal #1</strong></div>
                                            <div class="preview-field">
                                                <div class="preview-field-label">Business Definition</div>
                                                <div><strong><span id="previewSignalName_0">[signal name]</span></strong></div>
                                                <div><span id="previewSignalDesc_0">[business definition]</span></div>
                                                <div><em>Level:</em> <span id="previewObsLayer_0">[observability layer]</span></div>
                                            </div>
                                            <div class="preview-field">
                                                <div class="preview-field-label">SLO Target (Optional)</div>
                                                <div><span id="previewSLOTarget_0">Not set</span> over <span id="previewTimeWindow_0">-</span></div>
                                                <div><em>Rationale:</em> <span id="previewSLORationale_0">-</span></div>
                                            </div>
                                            <div class="preview-field">
                                                <div class="preview-field-label">Technical Implementation</div>
                                                <div><em>Type:</em> <span id="previewSignalType_0">[ratio/threshold]</span></div>
                                                <div><em>Data Source:</em> <span id="previewDataSource_0">[source]</span></div>
                                                <div><em>Owner:</em> <span id="previewTechOwner_0">[owner]</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Business Impact Signals -->
                                <div class="preview-card">
                                    <div class="preview-section-title"> Business Impact Signals</div>
                                    <div id="previewImpactsContainer">
                                        <div class="preview-impact">
                                            <div class="preview-field-label"><strong>Impact Signal #1</strong></div>
                                            <div class="preview-field">
                                                <div class="preview-field-label">Business Definition</div>
                                                <div><strong><span id="previewImpactName_0">[impact signal name]</span></strong></div>
                                                <div><span id="previewImpactDefn_0">[impact definition]</span></div>
                                                <div><em>Category:</em> <span id="previewImpactCategory_0">[category]</span> |
                                                <em>Unit:</em> <span id="previewImpactUnit_0">[unit]</span></div>
                                            </div>
                                            <div class="preview-field">
                                                <div class="preview-field-label">Technical Implementation</div>
                                                <div><em>Data Source:</em> <span id="previewImpactDataSource_0">[source]</span></div>
                                                <div><em>Owner:</em> <span id="previewImpactTechOwner_0">[owner]</span></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Quality Checklist -->
                                <div class="checklist-section">
                                    <div class="checklist-header" id="checklistHeader">
                                        <h4> Quality Checklist</h4>
                                        <span class="checklist-toggle"></span>
                                    </div>
                                    <div class="checklist-content" id="checklistContent">
                                        <div class="checklist-category">
                                            <h5>Service Definition</h5>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Business purpose clearly describes value delivered</span>
                                            </div>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Product owner contact information provided</span>
                                            </div>
                                        </div>
                                        <div class="checklist-category">
                                            <h5>Stakeholder Expectations</h5>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Each expectation follows "As a... I expect... Impact..." format</span>
                                            </div>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Impact descriptions explain business consequences</span>
                                            </div>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Priorities reflect business criticality</span>
                                            </div>
                                        </div>
                                        <div class="checklist-category">
                                            <h5>Signals & Implementation</h5>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Business definitions use PO-friendly language (not technical jargon)</span>
                                            </div>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Technical implementation maps to business definition</span>
                                            </div>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Data sources are identified and accessible</span>
                                            </div>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>SLO targets have clear rationale (optional but recommended)</span>
                                            </div>
                                        </div>
                                        <div class="checklist-category">
                                            <h5>Business Impact</h5>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Impact signals measure consequences (customers, dollars, transactions affected)</span>
                                            </div>
                                            <div class="checklist-item">
                                                <span class="icon"></span>
                                                <span>Impact categories match stakeholder expectation impacts</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="preview-next-steps">
                                    <h4> What Happens After Submission</h4>
                                    <ul>
                                        <li><strong>Service Created:</strong> Your service will be added to the BOS catalog</li>
                                        <li><strong>Dashboards Generated:</strong> Health and impact dashboards will be created automatically</li>
                                        <li><strong>Signals Configured:</strong> Technical team will implement signal measurements</li>
                                        <li><strong>Monitoring Active:</strong> Service health tracking begins immediately</li>
                                    </ul>
                                    <p><strong>Next Steps for You:</strong></p>
                                    <ul>
                                        <li>Review dashboards with your team</li>
                                        <li>Refine SLO targets based on actual performance</li>
                                        <li>Add additional signals as you identify new measurement needs</li>
                                        <li>Configure alert thresholds and notification preferences</li>
                                    </ul>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary-outline" id="btnBackToImpactTechnical">
                                         Back to Edit
                                    </button>
                                    <div class="progress-indicator">
                                        <span>Step 8 of 8</span>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 100%;"></div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary" id="btnSubmitService">
                                         Submit Service to BOS
                                    </button>
                                </div>
                            </div>
                        </div>

                                </div><!-- /.form-card -->
                            </div><!-- /.form-container -->
                        </div><!-- /.form-view -->

    </div>

    <script>
        // ===== EXAMPLE DATA =====
        const examples = {
            funding: {
                title: 'Funding Service - Complete BOS Entry',
                complexity: 'standard',
                serviceName: 'Funding Service',
                businessPurpose: 'Execute wire transfers to complete home purchase transactions. When a home loan is approved and closing date arrives, this service transfers funds from the bank to the title company to complete the purchase. Without this service, home closings cannot proceed and customers cannot complete their home purchases.',
                successBaseline: 'When operating normally, 99.5% of wire transfer requests complete successfully on the scheduled closing date, with funds reaching the title company within the required timeframe.',
                stakeholdersExpectations: 'Home buyers expect wire transfers to complete on their scheduled closing date so they can move into their homes as planned. Loan officers expect reliable transfer execution to avoid customer escalations and rescheduling. Title companies expect funds to arrive within required timeframes to complete closings.',
                stakeholder: 'Home buyers and loan officers',
                businessConsequence: 'Home closings are delayed, customers cannot move into their new homes on schedule, and loan officers must manage customer escalations and rescheduling.',
                financialImpact: 'Each delayed closing costs approximately $2,000 in operational overhead, customer remediation, and potential regulatory penalties. At 500 daily transactions, a 1% failure rate impacts 5 customers per day.',
                signalName: 'funding-success-rate',
                businessCriteria: 'The percentage of wire transfer requests that successfully complete on the scheduled closing date. Success means the funds reach the title company within the required timeframe, allowing the home purchase to close as planned. We expect 99.5% of transfers to succeed.',
                technicalCriteria: `SELECT
  (COUNT(*) FILTER (WHERE status='completed') * 100.0)
  / COUNT(*) as success_rate
FROM wire_transfers
WHERE
  scheduled_date = CURRENT_DATE
  AND created_at >= CURRENT_DATE`,
                sloTarget: '99.5%',
                sloRationale: 'Target is based on contractual SLA with title companies and historical baseline performance over the past 12 months.',
                timeWindow: '24h'
            },
            credit: {
                title: 'Credit Check Service - Complete BOS Entry',
                complexity: 'standard',
                serviceName: 'Credit Check Service',
                businessPurpose: 'Validate borrower creditworthiness for loan approval decisions. Retrieves credit scores from major bureaus (Equifax, Experian, TransUnion) and provides decision-ready reports to loan officers. Critical for regulatory compliance with FCRA 30-day requirement.',
                successBaseline: 'Under normal operation, 99.5% of credit check requests return valid credit scores within 3 seconds, enabling loan officers to proceed with approval decisions immediately.',
                stakeholdersExpectations: 'Loan officers expect credit scores within 30 seconds to keep approval workflow moving. Borrowers expect timely approval decisions without delays. Compliance team expects FCRA 30-day decision timing to be met consistently.',
                stakeholder: 'Loan officers and borrowers',
                businessConsequence: 'Loan officers cannot complete credit assessments, loan approvals are delayed, and FCRA 30-day decision requirement may be violated. Borrowers experience delays in loan processing.',
                financialImpact: 'Each failed credit check delays loan processing by 1-2 days. With 2,000 daily requests, a 1% failure rate affects 20 borrowers. FCRA violations carry penalties of $100-$1,000 per incident.',
                signalName: 'credit-check-success-rate',
                businessCriteria: 'The percentage of credit check requests that return valid credit scores within acceptable timeframes. Success means receiving complete bureau responses with actionable scores, allowing loan officers to proceed with approval decisions. We expect 99.5% success rate.',
                technicalCriteria: `SELECT
  (COUNT(*) FILTER (WHERE
    status='success'
    AND response_time_ms < 3000
    AND score IS NOT NULL
  ) * 100.0) / COUNT(*) as success_rate
FROM credit_check_requests
WHERE
  created_at >= CURRENT_DATE
  AND request_type = 'loan_application'`,
                sloTarget: '99.5%',
                sloRationale: 'Target driven by FCRA compliance requirements and contractual SLAs with credit bureaus. 3-second response time ensures loan officer workflow remains uninterrupted.',
                timeWindow: '24h'
            },
            trid: {
                title: 'TRID Disclosure Service - Complete BOS Entry',
                complexity: 'complex',
                serviceName: 'TRID Disclosure Service',
                businessPurpose: 'Ensure timely delivery of mortgage loan disclosure documents to borrowers in compliance with CFPB TRID rule. Must deliver Loan Estimate within 3 business days of application and Closing Disclosure at least 3 business days before closing. Regulatory compliance is mandatory.',
                successBaseline: 'Under normal operation, 99.95% of disclosure deliveries meet CFPB timing requirements, with business day calculations properly excluding weekends and holidays. Document revision handling ensures only the latest version triggers new 3-day waiting periods when material changes occur.',
                stakeholdersExpectations: 'Compliance team expects 100% CFPB TRID timing compliance to avoid regulatory penalties. Borrowers expect loan disclosures delivered on time to meet purchase contract deadlines and rate lock expirations. Loan officers expect automated delivery tracking to avoid manual follow-up.',
                stakeholder: 'Compliance team, borrowers, and loan officers',
                businessConsequence: 'CFPB violations occur, resulting in regulatory penalties, delayed closings, and potential loan application withdrawals. Borrowers may lose their interest rate lock or purchase contract deadlines.',
                financialImpact: 'CFPB TRID violations carry penalties up to $5,000 per incident for non-egregious violations, $25,000 for reckless violations. Each delayed closing costs $2,000 in operational overhead. With 300 daily applications, a 0.05% violation rate is 15 violations monthly ($75,000 minimum penalty exposure).',
                signalName: 'trid-delivery-compliance-rate',
                businessCriteria: 'The percentage of disclosure deliveries that meet CFPB 3-business-day requirements. Success means delivering Loan Estimate within 3 business days of application, and Closing Disclosure at least 3 business days before closing, using proper business day calculation (excluding weekends and holidays). We expect 99.95% compliance.',
                technicalCriteria: `WITH business_days AS (
  SELECT date FROM calendar
  WHERE is_business_day = true
),
latest_disclosures AS (
  SELECT
    loan_id,
    disclosure_type,
    delivered_date,
    ROW_NUMBER() OVER (
      PARTITION BY loan_id, disclosure_type
      ORDER BY version DESC
    ) as rn
  FROM disclosures
)
SELECT
  (COUNT(*) FILTER (WHERE
    disclosure_type = 'LE'
    AND business_days_between(application_date, delivered_date) <= 3
    OR
    disclosure_type = 'CD'
    AND business_days_between(delivered_date, closing_date) >= 3
  ) * 100.0) / COUNT(*) as compliance_rate
FROM latest_disclosures
JOIN loans USING (loan_id)
WHERE rn = 1 AND created_at >= CURRENT_DATE - 30`,
                sloTarget: '99.95%',
                sloRationale: 'Target mandated by CFPB TRID regulatory requirement. 99.95% allows for minimal technical exceptions while maintaining regulatory compliance. Higher than typical business SLO due to legal mandate.',
                timeWindow: '30d'
            }
        };

        // ===== STATE MANAGEMENT =====
        let currentView = 'gallery';
        let isUsingTemplate = false;
        let currentTemplate = null;

        // ===== DOM ELEMENTS =====
        // v1.2.0: Gallery/modal elements removed (no longer in UI)
        // const galleryView = document.getElementById('galleryView');
        // const formView = document.getElementById('formView');
        // const exampleModal = document.getElementById('exampleModal');
        // const exampleModalTitle = document.getElementById('exampleModalTitle');
        // const exampleModalContent = document.getElementById('exampleModalContent');
        // const exampleModalClose = document.getElementById('exampleModalClose');
        const helpIcon = document.getElementById('helpIcon');
        const closeBtn = document.getElementById('closeBtn');
        const overlay = document.getElementById('overlay');
        const drawer = document.getElementById('drawer');
        const glossaryIcon = document.getElementById('glossaryIcon');
        const glossaryDrawer = document.getElementById('glossaryDrawer');
        const glossaryCloseBtn = document.getElementById('glossaryCloseBtn');
        const glossarySearch = document.getElementById('glossarySearch');

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            initializeTabNavigation();
            initializeHelpDrawer();
            initializeGlossaryDrawer();
            initializeQualityChecklist();
            initializeStickyNav();
        });

        // ===== EVENT LISTENERS =====
        function initializeEventListeners() {
            // v1.2.0: Gallery view, example modal, and template buttons removed
            // All navigation is now handled by initializeTabNavigation()

            // Landing screen button (if exists)
            const btnExploreBOS = document.getElementById('btnExploreBOS');
            if (btnExploreBOS) {
                btnExploreBOS.addEventListener('click', function() {
                    const landingScreen = document.getElementById('landingScreen');
                    if (landingScreen) {
                        landingScreen.classList.remove('visible');
                    }
                });
            }
        }

        // ===== GALLERY FUNCTIONS (v1.2.0: REMOVED) =====
        // Gallery view removed in v1.2.0 - user goes straight to workflow
        // Example data preserved for future reference but functions disabled

        function viewExample(type) {
            // v1.2.0: Gallery modal removed
            console.log('viewExample() disabled in v1.2.0 - gallery view removed');
        }

        function closeExampleModal() {
            // v1.2.0: Gallery modal removed
            console.log('closeExampleModal() disabled in v1.2.0 - gallery view removed');
        }

        function useTemplate(type) {
            // v1.2.0: Template selection removed
            console.log('useTemplate() disabled in v1.2.0 - gallery view removed');
        }

        function startFresh() {
            // v1.2.0: Gallery view removed, user starts fresh by default
            console.log('startFresh() disabled in v1.2.0 - gallery view removed');
        }

        function showFormView() {
            // v1.2.0: No separate gallery/form views, user is always in form view
            const serviceName = document.getElementById('serviceName');
            if (serviceName) {
                serviceName.focus();
            }
        }

        function showLandingScreen() {
            const landingScreen = document.getElementById('landingScreen');
            if (landingScreen) {
                landingScreen.classList.add('visible');
                landingScreen.scrollTop = 0;
            }
        }

        function showGalleryView() {
            // v1.2.0: Gallery view removed
            console.log('showGalleryView() disabled in v1.2.0 - gallery view removed');
        }

        // ===== IMPACT SECTION TOGGLE (Tab 4) =====
        function toggleImpactSection(sectionId) {
            const section = document.getElementById('section' + sectionId.charAt(0).toUpperCase() + sectionId.slice(1));
            const icon = document.getElementById('icon' + sectionId.charAt(0).toUpperCase() + sectionId.slice(1));

            if (section.style.display === 'none') {
                section.style.display = 'block';
                icon.classList.add('expanded');
            } else {
                section.style.display = 'none';
                icon.classList.remove('expanded');
            }
        }

        // ===== TAB NAVIGATION =====
        function initializeTabNavigation() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');

            // Tab click handlers
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    if (!this.classList.contains('active')) {
                        switchTab(this.dataset.tab);
                    }
                });
            });

            // Navigation button handlers - v1.2.0 (8-screen flow)
            // Screen 02: Service Basics
            document.getElementById('btnNextToExpectations').addEventListener('click', () => {
                switchTab('stakeholder-expectations');
            });

            // Screen 03: Stakeholder Expectations
            document.getElementById('btnBackToBasics').addEventListener('click', () => {
                switchTab('service-basics');
            });

            document.getElementById('btnNextToSignalsBusiness').addEventListener('click', () => {
                switchTab('signals-business');
            });

            // Screen 04: Signals Business Definition
            document.getElementById('btnBackToExpectations').addEventListener('click', () => {
                switchTab('stakeholder-expectations');
            });

            document.getElementById('btnNextToSLO').addEventListener('click', () => {
                switchTab('signals-s-l-o'); // Note: converts to SignalsSLO
            });

            // Screen 05: SLO Targets (optional)
            document.getElementById('btnBackToSignalsBusiness').addEventListener('click', () => {
                switchTab('signals-business');
            });

            document.getElementById('btnSkipSLO').addEventListener('click', () => {
                switchTab('signals-technical');
            });

            document.getElementById('btnNextToSignalsTechnical').addEventListener('click', () => {
                switchTab('signals-technical');
            });

            // Screen 06: Signals Technical Implementation
            document.getElementById('btnBackToSLO').addEventListener('click', () => {
                switchTab('signals-s-l-o');
            });

            document.getElementById('btnNextToImpactBusiness').addEventListener('click', () => {
                switchTab('impact-business');
            });

            // Screen 07: Impact Business Definition
            document.getElementById('btnBackToSignalsTechnical').addEventListener('click', () => {
                switchTab('signals-technical');
            });

            document.getElementById('btnNextToImpactTechnical').addEventListener('click', () => {
                switchTab('impact-technical');
            });

            // Screen 08: Impact Technical Implementation
            document.getElementById('btnBackToImpactBusiness').addEventListener('click', () => {
                switchTab('impact-business');
            });

            document.getElementById('btnNextToPreview').addEventListener('click', () => {
                updatePreview();
                switchTab('preview');
            });

            // Screen 09: Preview
            document.getElementById('btnBackToImpactTechnical').addEventListener('click', () => {
                switchTab('impact-technical');
            });

            // Form submission
            // v1.2.0: No wrapping form element, attach to submit button instead
            const btnSubmitService = document.getElementById('btnSubmitService');
            if (btnSubmitService) {
                btnSubmitService.addEventListener('click', function(e) {
                    e.preventDefault();
                    handleFormSubmit();
                });
            }
        }

        function switchTab(tabId) {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            tabContents.forEach(content => {
                const contentId = 'content' + tabId.split('-').map(w =>
                    w.charAt(0).toUpperCase() + w.slice(1)
                ).join('');

                if (content.id === contentId) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }

        function validateTab(tabId) {
            // v1.2.0 MVP: Validation disabled
            // Full validation logic will be implemented with backend integration
            return true;
        }

        function markTabCompleted(tabId) {
            // v1.2.0 MVP: Tab completion marking disabled
            // No tab navigation UI in current version
            const tab = document.querySelector(`[data-tab="${tabId}"]`);
            if (tab) {
                tab.classList.add('completed');
            }

            const statusId = 'status' + tabId.split('-').map(w =>
                w.charAt(0).toUpperCase() + w.slice(1)
            ).join('');
            const status = document.getElementById(statusId);
            if (status) {
                status.textContent = '';
            }
        }

        // ===== PREVIEW =====
        function updatePreview() {
            // v1.2.0: Simplified preview for MVP - only updates basic fields
            // Full preview implementation with repeatable sections deferred to post-MVP

            // Service Basics (Screen 02)
            const serviceName = getFieldValue('serviceName');
            const businessPurpose = getFieldValue('businessPurpose');
            const orgId = getFieldValue('org_id');
            const productOwner = getFieldValue('productOwner');

            setPreviewText('previewServiceName', serviceName);
            setPreviewText('previewBusinessPurpose', businessPurpose);
            setPreviewText('previewOrgId', orgId);
            setPreviewText('previewProductOwner', productOwner);

            // For MVP: Show placeholder messages for repeatable sections
            // These will be populated by form submission logic in full implementation
            updateCompletionBadge([serviceName, businessPurpose, orgId, productOwner]);
        }

        function getFieldValue(fieldId) {
            const field = document.getElementById(fieldId);
            if (!field) return '';
            return field.value ? field.value.trim() : '';
        }

        function setPreviewText(previewId, value) {
            const elem = document.getElementById(previewId);
            if (elem) {
                elem.textContent = value || '(Not yet entered)';
            }
        }

        function updateCompletionBadge(requiredFields) {
            const badge = document.getElementById('previewCompletionBadge');
            if (!badge) return;

            const allFilled = requiredFields.every(field => field && field.length > 0);

            badge.innerHTML = allFilled ?
                '<span class="badge badge-complete"> Service Basics Complete</span>' :
                '<span class="badge badge-incomplete"> Complete Service Basics to continue</span>';
        }

        // ===== QUALITY CHECKLIST =====
        function initializeQualityChecklist() {
            const checklistHeader = document.getElementById('checklistHeader');
            const checklistContent = document.getElementById('checklistContent');

            checklistHeader.addEventListener('click', function() {
                this.classList.toggle('expanded');
                checklistContent.classList.toggle('visible');
            });
        }

        // ===== HELP DRAWER =====
        function initializeHelpDrawer() {
            helpIcon.addEventListener('click', toggleDrawer);
            closeBtn.addEventListener('click', closeDrawer);
            overlay.addEventListener('click', closeAllDrawers);
        }

        function toggleDrawer() {
            // Close glossary drawer if open (mutual exclusion)
            if (glossaryDrawer.classList.contains('visible')) {
                glossaryDrawer.classList.remove('visible');
            }

            // Toggle help drawer
            const wasVisible = drawer.classList.contains('visible');
            drawer.classList.toggle('visible');

            // Toggle overlay based on whether any drawer is visible
            if (wasVisible) {
                overlay.classList.remove('visible');
            } else {
                overlay.classList.add('visible');
            }
        }

        function closeDrawer() {
            drawer.classList.remove('visible');
            // Only close overlay if glossary is also closed
            if (!glossaryDrawer.classList.contains('visible')) {
                overlay.classList.remove('visible');
            }
        }

        // ===== GLOSSARY DRAWER =====
        function initializeGlossaryDrawer() {
            glossaryIcon.addEventListener('click', toggleGlossaryDrawer);
            glossaryCloseBtn.addEventListener('click', closeGlossaryDrawer);
            overlay.addEventListener('click', closeAllDrawers);
            glossarySearch.addEventListener('input', filterGlossaryTerms);
        }

        function toggleGlossaryDrawer() {
            // Close help drawer if open (mutual exclusion)
            if (drawer.classList.contains('visible')) {
                drawer.classList.remove('visible');
            }

            // Toggle glossary drawer
            const wasVisible = glossaryDrawer.classList.contains('visible');
            glossaryDrawer.classList.toggle('visible');

            // Toggle overlay based on whether any drawer is visible
            if (wasVisible) {
                overlay.classList.remove('visible');
            } else {
                overlay.classList.add('visible');
            }
        }

        function closeGlossaryDrawer() {
            glossaryDrawer.classList.remove('visible');
            // Only close overlay if help drawer is also closed
            if (!drawer.classList.contains('visible')) {
                overlay.classList.remove('visible');
            }
        }

        function closeAllDrawers() {
            drawer.classList.remove('visible');
            glossaryDrawer.classList.remove('visible');
            overlay.classList.remove('visible');
        }

        function filterGlossaryTerms() {
            const searchTerm = glossarySearch.value.toLowerCase();
            const terms = document.querySelectorAll('.glossary-term');

            terms.forEach(term => {
                const termName = term.querySelector('.term-name').textContent.toLowerCase();
                const termDual = term.querySelector('.term-dual')?.textContent.toLowerCase() || '';
                const termDefinition = term.querySelector('.term-definition').textContent.toLowerCase();

                const matches = termName.includes(searchTerm) ||
                               termDual.includes(searchTerm) ||
                               termDefinition.includes(searchTerm);

                if (matches || searchTerm === '') {
                    term.style.display = 'block';
                } else {
                    term.style.display = 'none';
                }
            });

            // Hide sections if all terms are hidden
            const sections = document.querySelectorAll('.glossary-section');
            sections.forEach(section => {
                const visibleTerms = section.querySelectorAll('.glossary-term[style="display: block"], .glossary-term:not([style*="display"])');
                if (visibleTerms.length === 0 && searchTerm !== '') {
                    section.style.display = 'none';
                } else {
                    section.style.display = 'block';
                }
            });
        }

        // ===== FORM SUBMISSION =====
        function handleFormSubmit() {
            alert(' Service submitted successfully!\n\nThis is a mockup. In the real system, this would:\n1. Validate your data\n2. Create the service entry\n3. Generate the signal definition\n4. Redirect you to add more signals or configure additional details');
        }

        // ===== STICKY NAVIGATION (LANDING SCREEN ONLY) =====
        function initializeStickyNav() {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('#overview, #problem, #solution, #incident-response, #how-it-works, #team-roles');

            // Set Overview as active by default on page load (if no hash)
            if (!window.location.hash) {
                navLinks.forEach(link => link.classList.remove('active'));
                const overviewLink = document.querySelector('.nav-link[href="#overview"]');
                if (overviewLink) {
                    overviewLink.classList.add('active');
                }
            }

            // Smooth scroll on navigation click
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetSection = document.querySelector(targetId);

                    if (targetSection) {
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });

                        // Update URL hash
                        history.pushState(null, null, targetId);
                    }
                });
            });

            // Intersection Observer for auto-highlighting current section
            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -70% 0px',
                threshold: 0
            };

            const observerCallback = (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionId = entry.target.getAttribute('id');

                        // Remove active class from all links
                        navLinks.forEach(link => link.classList.remove('active'));

                        // Add active class to corresponding link
                        const activeLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }

                        // Update URL hash without scrolling
                        if (history.replaceState) {
                            history.replaceState(null, null, `#${sectionId}`);
                        }
                    }
                });
            };

            const observer = new IntersectionObserver(observerCallback, observerOptions);

            // Observe all sections with IDs
            sections.forEach(section => {
                if (section.id) {
                    observer.observe(section);
                }
            });

            // Jump to section if URL has hash on page load
            if (window.location.hash) {
                setTimeout(() => {
                    const targetSection = document.querySelector(window.location.hash);
                    if (targetSection) {
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }, 100);
            }
        }

        // ===== UTILITY FUNCTIONS =====
        function formatImpactCategory(value) {
            const categories = {
                'customer': 'Customer Impact',
                'financial': 'Financial Impact',
                'legal': 'Legal/Regulatory/Risk Impact',
                'operational': 'Operational Impact'
            };
            return categories[value] || value;
        }

        function formatTimeWindow(value) {
            const windows = {
                '1h': 'Last 1 hour',
                '24h': 'Last 24 hours',
                '7d': 'Last 7 days',
                '30d': 'Last 30 days'
            };
            return windows[value] || value;
        }
    </script>

    <script>
        
    </script>
</body>
</html>
